<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal - 805 LifeGuard | Business Management Dashboard</title>
    <meta name="description" content="Advanced administration portal for 805 LifeGuard business management, customer oversight, and operational analytics.">
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        /* Enhanced CSS Variables with Advanced Design Tokens */
        :root {
            /* Core Colors - Admin Theme */
            --primary: #1e88e5;
            --primary-light: #42a5f5;
            --primary-dark: #1565c0;
            --secondary: #ff6b35;
            --secondary-light: #ff8965;
            --accent: #ffd700;
            --accent-gradient: linear-gradient(135deg, #ffd700, #ffed4a, #fff176);
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --white: #ffffff;
            --gray: #6c757d;
            --light-gray: #f8f9fa;
            --dark: #023e8a;
            --black: #1a1a1a;
            
            /* Enhanced Gradients - Admin Specific */
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --gradient-primary-vivid: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 50%, var(--secondary) 100%);
            --gradient-admin: linear-gradient(135deg, #1e88e5 0%, #ff6b35 50%, #1565c0 100%);
            --gradient-gold: linear-gradient(135deg, #ffd700 0%, #ffed4a 50%, #fff176 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.1) 100%);
            --gradient-glass-strong: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%);
            --gradient-mesh: radial-gradient(circle at 20% 80%, rgba(30, 136, 229, 0.15) 0%, transparent 50%),
                             radial-gradient(circle at 80% 20%, rgba(255, 107, 53, 0.15) 0%, transparent 50%);
            
            /* Enhanced Shadows */
            --shadow-soft: 0 2px 20px rgba(0,0,0,0.08);
            --shadow-medium: 0 8px 30px rgba(0,0,0,0.12);
            --shadow-strong: 0 15px 40px rgba(0,0,0,0.15);
            --shadow-glow: 0 0 30px rgba(30, 136, 229, 0.3);
            --shadow-glow-strong: 0 0 50px rgba(30, 136, 229, 0.4);
            --shadow-float: 0 20px 60px rgba(0,0,0,0.1);
            --shadow-inset: inset 0 2px 4px rgba(0,0,0,0.06);
            
            /* Border Radius */
            --radius-xs: 4px;
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            --radius-2xl: 40px;
            --radius-full: 50px;
            
            /* Enhanced Transitions */
            --transition-smooth: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --transition-elastic: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --transition-spring: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            
            /* Typography Scale */
            --font-xs: 0.75rem;
            --font-sm: 0.875rem;
            --font-base: 1rem;
            --font-lg: 1.125rem;
            --font-xl: 1.25rem;
            --font-2xl: 1.5rem;
            --font-3xl: 1.875rem;
            --font-4xl: 2.25rem;
            --font-5xl: 3rem;
            
            /* Spacing Scale */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
        }

        /* Advanced Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        ::selection {
            background: var(--primary);
            color: white;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #fff3e0 25%, #f0f8ff 50%, #fef7f0 75%, #e3f2fd 100%);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            font-feature-settings: 'kern' 1, 'liga' 1;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Enhanced Animated Background with Mesh Gradient */
        .enhanced-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            background: var(--gradient-mesh);
            overflow: hidden;
        }

        .floating-element {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(30, 136, 229, 0.12) 0%, rgba(255, 107, 53, 0.08) 50%, transparent 70%);
            filter: blur(1px);
            animation: float 12s ease-in-out infinite;
            opacity: 0.6;
        }

        .floating-element:nth-child(1) { 
            top: 10%; left: 10%; width: 120px; height: 120px; animation-delay: 0s; 
            animation-duration: 15s;
        }
        .floating-element:nth-child(2) { 
            top: 20%; right: 20%; width: 180px; height: 180px; animation-delay: 3s;
            animation-duration: 18s;
        }
        .floating-element:nth-child(3) { 
            bottom: 30%; left: 15%; width: 100px; height: 100px; animation-delay: 6s;
            animation-duration: 12s;
        }
        .floating-element:nth-child(4) { 
            top: 60%; right: 10%; width: 140px; height: 140px; animation-delay: 9s;
            animation-duration: 20s;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); 
                opacity: 0.6;
            }
            25% { 
                transform: translateY(-20px) translateX(10px) rotate(90deg) scale(1.1);
                opacity: 0.8;
            }
            50% { 
                transform: translateY(-40px) translateX(-5px) rotate(180deg) scale(0.9);
                opacity: 0.4;
            }
            75% { 
                transform: translateY(-15px) translateX(-10px) rotate(270deg) scale(1.05);
                opacity: 0.7;
            }
        }

        /* Performance-Optimized Backdrop Blur */
        .glass-blur {
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
        }

        .glass-blur-strong {
            backdrop-filter: blur(30px) saturate(200%);
            -webkit-backdrop-filter: blur(30px) saturate(200%);
        }

        /* Enhanced Navigation */
        .main-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding: var(--space-3) 0;
            transition: var(--transition-smooth);
        }

        .main-nav.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: var(--shadow-medium);
            padding: var(--space-2) 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-8);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: var(--transition-spring);
            z-index: 1001;
        }

        .nav-logo:hover { 
            transform: scale(1.05) translateY(-2px);
        }

        .nav-logo img {
            height: 45px;
            margin-right: var(--space-3);
            transition: var(--transition-smooth);
        }

        .nav-logo-text {
            font-size: var(--font-xl);
            font-weight: 800;
            background: var(--gradient-admin);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: var(--space-2);
            align-items: center;
        }

        .nav-link {
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-full);
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            transition: var(--transition-elastic);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-admin);
            transition: var(--transition-elastic);
            z-index: -1;
            border-radius: var(--radius-full);
        }

        .nav-link:hover::before { 
            left: 0; 
        }

        .nav-link:hover { 
            color: white;
            transform: translateY(-3px);
            box-shadow: var(--shadow-glow);
        }

        .nav-link.active {
            background: var(--gradient-admin);
            color: white;
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        /* Enhanced Glassmorphism Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-soft);
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            opacity: 0;
            transition: var(--transition-smooth);
            pointer-events: none;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-float);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .glass-card:hover::before {
            opacity: 1;
        }

        /* Enhanced Login Screen */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: var(--space-5);
            padding-top: 120px;
        }

        .login-card {
            border-radius: var(--radius-2xl);
            padding: var(--space-16) var(--space-12);
            width: 100%;
            max-width: 520px;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.8s var(--transition-elastic);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(60px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-admin);
            border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
        }

        .login-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(30, 136, 229, 0.03), transparent);
            animation: rotate 20s linear infinite;
            pointer-events: none;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .login-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-8);
            position: relative;
            z-index: 1;
        }

        .login-logo img {
            height: 70px;
            margin-right: var(--space-4);
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.1));
        }

        .login-logo-text {
            text-align: left;
        }

        .login-logo-main {
            font-size: var(--font-3xl);
            font-weight: 900;
            background: var(--gradient-admin);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            text-shadow: 0 4px 20px rgba(30, 136, 229, 0.3);
        }

        .login-logo-subtitle {
            font-size: var(--font-sm);
            color: var(--gray);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: var(--space-1);
        }

        /* Enhanced Form Elements */
        .form-group {
            margin-bottom: var(--space-6);
            text-align: left;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-2);
            font-weight: 700;
            color: var(--dark);
            font-size: var(--font-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input {
            width: 100%;
            padding: var(--space-5) var(--space-6);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            transition: var(--transition-spring);
            background: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            position: relative;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 0 0 6px rgba(30, 136, 229, 0.12), var(--shadow-medium);
            transform: translateY(-3px) scale(1.02);
        }

        .form-input:invalid {
            border-color: var(--error);
            box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);
        }

        .form-input:valid {
            border-color: var(--success);
        }

        /* Enhanced Password Field */
        .password-container {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: var(--space-4);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: var(--font-lg);
            padding: var(--space-2);
            border-radius: var(--radius-sm);
            transition: var(--transition-smooth);
        }

        .password-toggle:hover {
            color: var(--primary);
            background: rgba(30, 136, 229, 0.1);
        }

        /* Enhanced Buttons */
        .btn-primary {
            background: var(--gradient-admin);
            color: white;
            border: none;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-lg);
            font-size: var(--font-lg);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-spring);
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transition: var(--transition-elastic);
            transform: translate(-50%, -50%);
        }

        .btn-primary:hover::before {
            width: 400px;
            height: 400px;
        }

        .btn-primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-float);
        }

        .btn-primary:active {
            transform: translateY(-2px) scale(0.98);
        }

        .btn-secondary {
            background: var(--light-gray);
            color: var(--dark);
            border: 2px solid transparent;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
            border-color: var(--primary);
        }

        /* Enhanced Portal Layout */
        .portal-container {
            display: none;
            min-height: 100vh;
            padding-top: 90px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .portal-header {
            background: rgba(255, 255, 255, 0.95);
            padding: var(--space-4) var(--space-5);
            box-shadow: var(--shadow-soft);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .portal-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .portal-logo {
            display: flex;
            align-items: center;
        }

        .portal-logo img {
            height: 45px;
            margin-right: var(--space-3);
        }

        .portal-logo-text {
            font-size: var(--font-xl);
            font-weight: 800;
            background: var(--gradient-admin);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .portal-user-menu {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            background: var(--gradient-admin);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            transition: var(--transition-spring);
            box-shadow: var(--shadow-medium);
        }

        .user-avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: var(--shadow-glow-strong);
        }

        .logout-btn {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition-spring);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .logout-btn:hover {
            background: var(--secondary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .portal-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-10) var(--space-8);
        }

        /* Enhanced Welcome Section - Admin */
        .welcome-section {
            background: var(--gradient-admin);
            color: white;
            padding: var(--space-16) var(--space-10);
            border-radius: var(--radius-2xl);
            margin-bottom: var(--space-10);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-float);
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 50%);
            animation: rotate 30s linear infinite;
            pointer-events: none;
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-title {
            font-size: clamp(var(--font-3xl), 5vw, var(--font-5xl));
            margin-bottom: var(--space-4);
            font-weight: 900;
            text-shadow: 0 4px 30px rgba(0,0,0,0.3);
            line-height: 1.1;
        }

        .welcome-subtitle {
            font-size: var(--font-xl);
            opacity: 0.95;
            margin-bottom: var(--space-8);
            font-weight: 500;
        }

        /* Enhanced Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: var(--space-8);
            margin-bottom: var(--space-10);
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-soft);
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.4);
            animation: slideInCard 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        .dashboard-card:nth-child(1) { animation-delay: 0.1s; }
        .dashboard-card:nth-child(2) { animation-delay: 0.2s; }
        .dashboard-card:nth-child(3) { animation-delay: 0.3s; }
        .dashboard-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideInCard {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-admin);
            border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
        }

        .dashboard-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: var(--shadow-float);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-5);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            font-size: var(--font-xl);
            font-weight: 800;
            color: var(--dark);
        }

        .card-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-admin);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-xl);
            transition: var(--transition-spring);
            box-shadow: var(--shadow-medium);
        }

        .dashboard-card:hover .card-icon {
            transform: rotate(10deg) scale(1.1);
            box-shadow: var(--shadow-glow);
        }

        .card-action {
            background: rgba(30, 136, 229, 0.1);
            color: var(--primary);
            border: 2px solid transparent;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-spring);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .card-action:hover {
            background: rgba(30, 136, 229, 0.2);
            transform: translateY(-2px);
            border-color: var(--primary);
        }

        /* Enhanced Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: var(--space-6);
            margin-top: var(--space-8);
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            transition: var(--transition-spring);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stat-item:hover {
            transform: translateY(-8px) scale(1.05);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-float);
        }

        .stat-number {
            font-size: var(--font-4xl);
            font-weight: 900;
            margin-bottom: var(--space-2);
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }

        .stat-label {
            font-weight: 600;
            opacity: 0.9;
        }

        /* Enhanced Utility Classes */
        .btn-small {
            padding: var(--space-2) var(--space-4);
            font-size: var(--font-sm);
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-spring);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }

        .btn-edit {
            background: rgba(30, 136, 229, 0.1);
            color: var(--primary);
            border: 1px solid rgba(30, 136, 229, 0.2);
        }

        .btn-edit:hover {
            background: rgba(30, 136, 229, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-cancel {
            background: rgba(244, 67, 54, 0.1);
            color: var(--error);
            border: 1px solid rgba(244, 67, 54, 0.2);
        }

        .btn-cancel:hover {
            background: rgba(244, 67, 54, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-success {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        .btn-success:hover {
            background: rgba(76, 175, 80, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Enhanced Calendar with Better Visual Hierarchy */
        .calendar-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-soft);
            margin-bottom: var(--space-10);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
            flex-wrap: wrap;
            gap: var(--space-4);
        }

        .calendar-title {
            font-size: var(--font-2xl);
            font-weight: 800;
            color: var(--dark);
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .calendar-btn {
            background: var(--gradient-admin);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition-spring);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-lg);
            box-shadow: var(--shadow-medium);
        }

        .calendar-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: var(--shadow-glow);
        }

        .current-month {
            font-size: var(--font-xl);
            font-weight: 700;
            color: var(--primary);
            min-width: 200px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: #e9ecef;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-inset);
        }

        .calendar-day-header {
            background: var(--gradient-admin);
            color: white;
            padding: var(--space-4) var(--space-2);
            text-align: center;
            font-size: var(--font-sm);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calendar-day {
            background: rgba(255, 255, 255, 0.95);
            min-height: 100px;
            padding: var(--space-3);
            cursor: pointer;
            transition: var(--transition-spring);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(30, 136, 229, 0.1);
            position: relative;
        }

        .calendar-day:hover:not(.other-month):not(.past-date) {
            background: rgba(168, 237, 234, 0.4);
            transform: scale(1.05);
            box-shadow: var(--shadow-medium);
            z-index: 10;
        }

        .calendar-day.other-month {
            color: #ccc;
            background: #f8f9fa;
            cursor: default;
            opacity: 0.5;
        }

        .calendar-day.past-date {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .calendar-day.today {
            background: rgba(30, 136, 229, 0.2);
            font-weight: 900;
            border: 3px solid var(--primary);
            box-shadow: var(--shadow-glow);
            transform: scale(1.02);
        }

        .calendar-day.selected {
            background: var(--gradient-admin) !important;
            color: white;
            transform: scale(1.08);
            box-shadow: var(--shadow-glow-strong);
            z-index: 20;
        }

        .calendar-day.available { border-left: 5px solid var(--success); }
        .calendar-day.booked { border-left: 5px solid var(--warning); }
        .calendar-day.unavailable { border-left: 5px solid var(--error); }
        .calendar-day.staff-scheduled { border-left: 5px solid var(--primary); }

        .day-number {
            font-weight: 700;
            margin-bottom: var(--space-2);
            font-size: var(--font-lg);
        }

        .day-events {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }

        .event-dot {
            width: 100%;
            height: 6px;
            border-radius: var(--radius-xs);
            box-shadow: var(--shadow-soft);
        }

        .event-available { 
            background: linear-gradient(45deg, var(--success), #66bb6a);
        }
        .event-booked { 
            background: linear-gradient(45deg, var(--warning), #ffb74d);
        }
        .event-staff { 
            background: var(--gradient-admin);
        }

        .day-booking-count {
            font-size: var(--font-xs);
            background: rgba(30, 136, 229, 0.1);
            color: var(--primary);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            text-align: center;
            font-weight: 600;
            margin-top: var(--space-1);
        }

        /* Loading States */
        .loading {
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading .spinner {
            border-color: rgba(255, 255, 255, 0.3);
            border-top-color: currentColor;
        }

        /* Enhanced Notifications */
        .notification {
            position: fixed;
            top: 120px;
            right: var(--space-8);
            max-width: 450px;
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-float);
            z-index: 10000;
            transform: translateX(100%);
            transition: var(--transition-spring);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .notification.show {
            transform: translateX(0);
            animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .notification.success {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.95) 0%, rgba(129, 199, 132, 0.95) 100%);
            color: white;
        }

        .notification.error {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.95) 0%, rgba(239, 83, 80, 0.95) 100%);
            color: white;
        }

        .notification.info {
            background: linear-gradient(135deg, rgba(30, 136, 229, 0.95) 0%, rgba(66, 165, 245, 0.95) 100%);
            color: white;
        }

        /* Enhanced Status and Badge Styles */
        .status-badge {
            display: inline-block;
            font-weight: 600;
            font-size: var(--font-xs);
            text-transform: capitalize;
            border-radius: var(--radius-full);
            padding: var(--space-1) var(--space-3);
        }

        .status-active { background: rgba(76, 175, 80, 0.15); color: var(--success); }
        .status-inactive { background: rgba(158, 158, 158, 0.15); color: var(--gray); }
        .status-pending { background: rgba(255, 152, 0, 0.15); color: var(--warning); }
        .status-confirmed { 
            background: rgba(30, 136, 229, 0.15); 
            color: var(--primary);
            animation: fadeInUp 0.3s ease-out;
        }
        .status-completed { 
            background: rgba(76, 175, 80, 0.15); 
            color: var(--success);
            animation: fadeInUp 0.3s ease-out;
        }
        .status-cancelled { background: rgba(244, 67, 54, 0.15); color: var(--error); }
        .status-training { background: rgba(156, 39, 176, 0.15); color: #9c27b0; }

        .plan-badge {
            display: inline-block;
            font-weight: 600;
            font-size: var(--font-xs);
            text-transform: uppercase;
            border-radius: var(--radius-sm);
            padding: var(--space-1) var(--space-2);
        }

        .plan-basic { background: rgba(96, 125, 139, 0.15); color: #607d8b; }
        .plan-premium { background: rgba(255, 152, 0, 0.15); color: var(--warning); }
        .plan-deluxe { background: rgba(156, 39, 176, 0.15); color: #9c27b0; }

        .role-badge {
            display: inline-block;
            font-weight: 600;
            font-size: var(--font-xs);
            text-transform: uppercase;
            border-radius: var(--radius-sm);
            padding: var(--space-1) var(--space-2);
        }

        .role-lifeguard { background: rgba(30, 136, 229, 0.15); color: var(--primary); }
        .role-pool_technician { background: rgba(76, 175, 80, 0.15); color: var(--success); }
        .role-supervisor { background: rgba(255, 152, 0, 0.15); color: var(--warning); }
        .role-manager { background: rgba(156, 39, 176, 0.15); color: #9c27b0; }

        /* Enhanced Table Styles */
        .table-container {
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid #dee2e6;
        }

        .table-container table {
            width: 100%;
            border-collapse: collapse;
            font-size: var(--font-sm);
        }

        .table-container th {
            background: var(--light-gray);
            padding: var(--space-3);
            text-align: left;
            font-weight: 700;
            color: var(--dark);
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .table-container td {
            padding: var(--space-3);
            border-bottom: 1px solid #dee2e6;
            transition: background-color 0.2s;
        }

        .table-container tr:hover td {
            background-color: rgba(30, 136, 229, 0.05);
        }

        /* Modal System Styles */
        .admin-modal-overlay {
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
        }

        .admin-modal-content {
            position: relative;
            overflow: hidden;
        }

        .admin-modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-admin);
            border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
        }

        /* Report Button Hover Effects */
        .report-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Analytics Card Enhancements */
        .analytics-card {
            position: relative;
            overflow: hidden;
            transition: var(--transition-spring);
        }

        .analytics-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-float);
        }

        .analytics-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 50%);
            animation: rotate 20s linear infinite;
            pointer-events: none;
        }

        /* Utility Classes */
        .hidden { 
            display: none !important; 
        }
        
        .show { 
            display: block !important; 
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        @keyframes slideInRight {
            from { 
                opacity: 0; 
                transform: translateX(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Enhanced hover effects for buttons */
        .btn-small:hover {
            animation: pulse 0.3s ease-in-out;
        }
        
        .dashboard-card:hover .card-icon {
            animation: bounceIn 0.6s ease-in-out;
        }

        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Enhanced Responsive Design */
        @media (max-width: 1024px) {
            .nav-links { 
                gap: var(--space-1);
            }
            
            .nav-link {
                padding: var(--space-2) var(--space-3);
                font-size: var(--font-sm);
            }
        }

        @media (max-width: 768px) {
            .nav-links { 
                display: none; 
            }
            
            .login-card {
                padding: var(--space-10) var(--space-6);
                margin: var(--space-3);
                max-width: 450px;
            }
            
            .welcome-title { 
                font-size: var(--font-3xl);
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: var(--space-5);
            }
            
            .quick-stats { 
                grid-template-columns: repeat(2, 1fr); 
            }

            .portal-content { 
                padding: var(--space-5) var(--space-4); 
            }
            
            .welcome-section { 
                padding: var(--space-10) var(--space-6); 
            }
            
            .dashboard-card { 
                padding: var(--space-6); 
            }

            /* Responsive Modal Improvements */
            .admin-modal-content {
                margin: var(--space-4);
                padding: var(--space-6);
                max-height: 85vh;
            }
            
            .admin-modal-content.large {
                max-width: none;
                width: calc(100vw - 2rem);
            }
        }

        @media (max-width: 480px) {
            .login-card {
                padding: var(--space-8) var(--space-5);
                max-width: 380px;
            }
            
            .quick-stats { 
                grid-template-columns: 1fr; 
            }

            .notification {
                right: var(--space-4);
                left: var(--space-4);
                max-width: none;
            }
        }

        /* Focus Styles for Better Accessibility */
        *:focus {
            outline: 3px solid rgba(30, 136, 229, 0.5);
            outline-offset: 2px;
        }

        .nav-link:focus,
        .btn-primary:focus,
        .btn-secondary:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(30, 136, 229, 0.3);
        }

        /* Print Styles */
        @media print {
            .main-nav,
            .portal-header,
            .floating-element,
            .enhanced-background {
                display: none !important;
            }
            
            .portal-container {
                padding-top: 0 !important;
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced Animated Background -->
    <div class="enhanced-background glass-blur">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <!-- Enhanced Navigation -->
    <nav class="main-nav glass-blur" id="mainNav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="/" class="nav-logo" aria-label="805 LifeGuard Home">
                <img src="/images/805-lifeguard-logo.png" alt="805 LifeGuard Logo" onerror="this.style.display='none'">
                <span class="nav-logo-text">805 LifeGuard</span>
            </a>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/client-login" class="nav-link">Client Portal</a>
                <a href="/employee-login" class="nav-link">Staff Portal</a>
                <a href="/admin" class="nav-link active">Admin Portal</a>
            </div>
        </div>
    </nav>

    <!-- Enhanced Login Screen -->
    <div class="login-container" id="loginContainer" role="main">
        <div class="login-card glass-card glass-blur">
            <div class="login-logo">
                <img src="/images/805-lifeguard-logo.png" alt="805 LifeGuard Logo" onerror="this.style.display='none'">
                <div class="login-logo-text">
                    <div class="login-logo-main">805 LifeGuard</div>
                    <div class="login-logo-subtitle">Admin Portal</div>
                </div>
            </div>
            
            <h1 style="font-size: var(--font-3xl); margin-bottom: var(--space-3); color: var(--dark); font-weight: 900;">Administrator Access</h1>
            <p style="color: var(--gray); margin-bottom: var(--space-8); font-size: var(--font-lg);">Secure access to business management and analytics dashboard</p>
            
            <form id="adminLoginForm" novalidate>
                <div class="form-group">
                    <label for="adminEmail" class="form-label">Admin Email</label>
                    <input type="email" id="adminEmail" class="form-input" placeholder="Enter admin email" required aria-describedby="email-error">
                </div>
                
                <div class="form-group">
                    <label for="adminPassword" class="form-label">Password</label>
                    <div class="password-container">
                        <input type="password" id="adminPassword" class="form-input" placeholder="Enter admin password" required aria-describedby="password-error">
                        <button type="button" class="password-toggle" id="adminPasswordToggle" aria-label="Toggle password visibility">
                            <i class="fas fa-eye" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-8); font-size: var(--font-base);">
                    <label style="display: flex; align-items: center; gap: var(--space-2); cursor: pointer;">
                        <input type="checkbox" id="adminRememberMe">
                        <span>Remember me</span>
                    </label>
                    <a href="#" style="color: var(--primary); text-decoration: none; font-weight: 600;">Forgot password?</a>
                </div>
                
                <button type="submit" class="btn-primary" id="adminLoginBtn">
                    <span class="btn-text">Admin Sign In</span>
                    <span class="loading" style="display: none;">
                        <span class="spinner"></span>
                        Authenticating...
                    </span>
                </button>
                
                <div class="error-message hidden" id="adminLoginError" role="alert" style="color: var(--error); margin-top: var(--space-4); padding: var(--space-3); background: rgba(244, 67, 54, 0.1); border-radius: var(--radius-lg); border: 1px solid rgba(244, 67, 54, 0.2);"></div>
            </form>

            <div style="margin-top: var(--space-8); text-align: center;">
                <p style="margin-bottom: var(--space-4); color: var(--gray); font-size: var(--font-base);">Need to access a different portal?</p>
                <div style="display: flex; gap: var(--space-3); justify-content: center; flex-wrap: wrap;">
                    <a href="/client-login" class="btn-secondary" style="text-decoration: none; display: inline-flex; align-items: center; gap: var(--space-2);">
                        <i class="fas fa-swimmer"></i> Client Portal
                    </a>
                    <a href="/employee-login" class="btn-secondary" style="text-decoration: none; display: inline-flex; align-items: center; gap: var(--space-2);">
                        <i class="fas fa-user-shield"></i> Staff Portal
                    </a>
                </div>
            </div>
            
            <div style="margin-top: var(--space-8); padding-top: var(--space-5); border-top: 1px solid #e9ecef; color: var(--gray); font-size: var(--font-base); text-align: center;">
                <p>Admin Support: <a href="tel:8053676432" style="color: var(--primary); text-decoration: none; font-weight: 600;">(805) 367-6432</a></p>
            </div>
        </div>
    </div>

    <!-- Enhanced Admin Portal Dashboard -->
    <div class="portal-container" id="adminPortalContainer" role="main">
        <!-- Enhanced Portal Header -->
        <header class="portal-header glass-blur">
            <nav class="portal-nav" role="navigation" aria-label="Portal navigation">
                <div class="portal-logo">
                    <img src="/images/805-lifeguard-logo.png" alt="805 LifeGuard Logo" onerror="this.style.display='none'">
                    <span class="portal-logo-text">Admin Portal</span>
                </div>
                <div class="portal-user-menu">
                    <div class="user-avatar" id="adminUserAvatar" role="img" aria-label="Admin avatar">AD</div>
                    <span id="adminUserName">Admin User</span>
                    <button class="logout-btn" id="adminLogoutBtn" aria-label="Logout">
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                        Logout
                    </button>
                </div>
            </nav>
        </header>

        <!-- Enhanced Portal Content -->
        <main class="portal-content">
            <!-- Enhanced Welcome Section -->
            <section class="welcome-section" aria-labelledby="admin-welcome-heading">
                <div class="welcome-content">
                    <h1 class="welcome-title" id="admin-welcome-heading">Welcome to Admin Control</h1>
                    <p class="welcome-subtitle">Comprehensive business management and analytics dashboard for 805 LifeGuard operations.</p>
                    
                    <div class="quick-stats" role="region" aria-label="Business statistics">
                        <div class="stat-item">
                            <div class="stat-number" id="totalCustomers" aria-label="Total customers">0</div>
                            <div class="stat-label">Total Customers</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="totalBookings" aria-label="Total bookings">0</div>
                            <div class="stat-label">Total Bookings</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="monthlyRevenue" aria-label="Monthly revenue">$0</div>
                            <div class="stat-label">Monthly Revenue</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="activeStaff" aria-label="Active staff">0</div>
                            <div class="stat-label">Active Staff</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Dashboard Cards -->
            <section class="dashboard-grid" role="region" aria-label="Admin dashboard actions">
                <!-- Customer Management Card -->
                <div class="dashboard-card glass-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <div class="card-icon"><i class="fas fa-users" aria-hidden="true"></i></div>
                            Customer Management
                        </h2>
                        <button class="card-action" onclick="adminPortal.openCustomerManagement()" aria-label="Manage customers">
                            <i class="fas fa-cog" aria-hidden="true"></i> Manage
                        </button>
                    </div>
                    <p>View, edit, and manage customer accounts, bookings, and payment information.</p>
                    <div style="margin-top: var(--space-5); display: flex; gap: var(--space-3); flex-wrap: wrap;">
                        <button class="btn-small btn-edit" onclick="adminPortal.viewCustomers()" aria-label="View all customers">
                            <i class="fas fa-list" aria-hidden="true"></i> View All
                        </button>
                        <button class="btn-small btn-edit" onclick="adminPortal.addCustomer()" aria-label="Add new customer">
                            <i class="fas fa-user-plus" aria-hidden="true"></i> Add New
                        </button>
                        <button class="btn-small btn-success" onclick="adminPortal.exportCustomers()" aria-label="Export customer data">
                            <i class="fas fa-download" aria-hidden="true"></i> Export
                        </button>
                    </div>
                </div>

                <!-- Booking Management Card -->
                <div class="dashboard-card glass-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <div class="card-icon"><i class="fas fa-calendar-alt" aria-hidden="true"></i></div>
                            Booking Management
                        </h2>
                        <button class="card-action" onclick="adminPortal.openBookingManagement()" aria-label="Manage bookings">
                            <i class="fas fa-calendar-check" aria-hidden="true"></i> Manage
                        </button>
                    </div>
                    <p>Oversee all bookings, schedules, and appointment confirmations across the platform.</p>
                    <div style="margin-top: var(--space-5); display: flex; gap: var(--space-3); flex-wrap: wrap;">
                        <button class="btn-small btn-edit" onclick="adminPortal.viewBookings()" aria-label="View all bookings">
                            <i class="fas fa-calendar" aria-hidden="true"></i> View All
                        </button>
                        <button class="btn-small btn-success" onclick="adminPortal.confirmBookings()" aria-label="Confirm pending bookings">
                            <i class="fas fa-check" aria-hidden="true"></i> Confirm
                        </button>
                        <button class="btn-small btn-cancel" onclick="adminPortal.cancelBookings()" aria-label="Manage cancellations">
                            <i class="fas fa-times" aria-hidden="true"></i> Cancel
                        </button>
                    </div>
                </div>

                <!-- Staff Management Card -->
                <div class="dashboard-card glass-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <div class="card-icon"><i class="fas fa-user-shield" aria-hidden="true"></i></div>
                            Staff Management
                        </h2>
                        <button class="card-action" onclick="adminPortal.openStaffManagement()" aria-label="Manage staff">
                            <i class="fas fa-users-cog" aria-hidden="true"></i> Manage
                        </button>
                    </div>
                    <p>Manage employee accounts, schedules, certifications, and performance tracking.</p>
                    <div style="margin-top: var(--space-5); display: flex; gap: var(--space-3); flex-wrap: wrap;">
                        <button class="btn-small btn-edit" onclick="adminPortal.viewStaff()" aria-label="View all staff">
                            <i class="fas fa-list" aria-hidden="true"></i> View All
                        </button>
                        <button class="btn-small btn-edit" onclick="adminPortal.addStaff()" aria-label="Add new staff">
                            <i class="fas fa-user-plus" aria-hidden="true"></i> Add Staff
                        </button>
                        <button class="btn-small btn-success" onclick="adminPortal.manageSchedules()" aria-label="Manage schedules">
                            <i class="fas fa-clock" aria-hidden="true"></i> Schedules
                        </button>
                    </div>
                </div>

                <!-- Analytics & Reports Card -->
                <div class="dashboard-card glass-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <div class="card-icon"><i class="fas fa-chart-line" aria-hidden="true"></i></div>
                            Analytics & Reports
                        </h2>
                        <button class="card-action" onclick="adminPortal.openAnalytics()" aria-label="View analytics">
                            <i class="fas fa-chart-bar" aria-hidden="true"></i> Analyze
                        </button>
                    </div>
                    <p>Comprehensive business analytics, financial reports, and performance metrics.</p>
                    <div style="margin-top: var(--space-5); display: flex; gap: var(--space-3); flex-wrap: wrap;">
                        <button class="btn-small btn-edit" onclick="adminPortal.viewReports()" aria-label="View reports">
                            <i class="fas fa-file-alt" aria-hidden="true"></i> Reports
                        </button>
                        <button class="btn-small btn-success" onclick="adminPortal.financialAnalytics()" aria-label="View financial analytics">
                            <i class="fas fa-dollar-sign" aria-hidden="true"></i> Financial
                        </button>
                        <button class="btn-small btn-edit" onclick="adminPortal.exportReports()" aria-label="Export reports">
                            <i class="fas fa-download" aria-hidden="true"></i> Export
                        </button>
                    </div>
                </div>
            </section>

            <!-- Enhanced Admin Calendar Section -->
            <section class="calendar-container glass-card" role="region" aria-label="Admin booking calendar">
                <div class="calendar-header">
                    <h2 class="calendar-title">Booking Calendar Overview</h2>
                    <div class="calendar-nav" role="group" aria-label="Calendar navigation">
                        <button class="calendar-btn" id="adminPrevMonth" aria-label="Previous month">
                            <i class="fas fa-chevron-left" aria-hidden="true"></i>
                        </button>
                        <div class="current-month" id="adminCurrentMonth" aria-live="polite">Loading...</div>
                        <button class="calendar-btn" id="adminNextMonth" aria-label="Next month">
                            <i class="fas fa-chevron-right" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
                
                <div class="calendar-grid" id="adminCalendarGrid" role="grid" aria-label="Admin calendar grid">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
                
                <div style="margin-top: var(--space-6); display: flex; gap: var(--space-6); flex-wrap: wrap; justify-content: center; font-size: var(--font-base);" role="region" aria-label="Calendar legend">
                    <div style="display: flex; align-items: center; gap: var(--space-3);">
                        <div style="width: 16px; height: 16px; background: var(--success); border-radius: var(--radius-xs);"></div>
                        <span>Available</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-3);">
                        <div style="width: 16px; height: 16px; background: var(--warning); border-radius: var(--radius-xs);"></div>
                        <span>Partially Booked</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-3);">
                        <div style="width: 16px; height: 16px; background: var(--error); border-radius: var(--radius-xs);"></div>
                        <span>Fully Booked</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-3);">
                        <div style="width: 16px; height: 16px; background: var(--primary); border-radius: var(--radius-xs);"></div>
                        <span>Staff Scheduled</span>
                    </div>
                </div>
                
                <div style="margin-top: var(--space-6); display: flex; gap: var(--space-4); flex-wrap: wrap; justify-content: center;">
                    <button class="btn-small btn-edit" onclick="adminPortal.viewDayDetails()" aria-label="View selected day details">
                        <i class="fas fa-eye" aria-hidden="true"></i> View Day Details
                    </button>
                    <button class="btn-small btn-success" onclick="adminPortal.addBlockedTime()" aria-label="Block time slot">
                        <i class="fas fa-ban" aria-hidden="true"></i> Block Time
                    </button>
                    <button class="btn-small btn-edit" onclick="adminPortal.scheduleStaff()" aria-label="Schedule staff">
                        <i class="fas fa-user-clock" aria-hidden="true"></i> Schedule Staff
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Include the unified portal system -->
    <script src="./lifeguard-portal-system.js"></script>

    <!-- Enhanced Admin Portal JavaScript -->
    <script>
        // Enhanced Admin Portal System
        class EnhancedAdminPortal {
            constructor() {
                this.currentAdmin = null;
                this.currentDate = new Date();
                this.selectedDate = null;
                this.customers = [];
                this.bookings = [];
                this.staff = [];
                this.analytics = {};
                this.currentModal = null;
                
                // Use the unified portal system
                this.portalSystem = window.LifeGuardPortalSystem;
                
                this.init();
            }

            async init() {
                console.log(' Initializing Enhanced Admin Portal...');
                
                // Check if unified portal system is available
                if (!window.LifeGuardPortalSystem) {
                    console.error(' Unified Portal System not found! Make sure lifeguard-portal-system.js is loaded.');
                    alert('System Error: Portal system not loaded. Please refresh the page.');
                    return;
                }
                
                console.log(' Unified Portal System found:', window.LifeGuardPortalSystem);
                
                this.setupEventListeners();
                this.setupScrollEffects();
                
                // Check for existing admin token
                const token = this.portalSystem.getAuthToken('admin');
                if (token) {
                    await this.validateAdminToken(token);
                } else {
                    this.showLogin();
                }
                
                console.log(' Enhanced Admin Portal initialized successfully!');
            }

            setupEventListeners() {
                // Admin login form
                document.getElementById('adminLoginForm')?.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleAdminLogin();
                });

                // Password toggle
                document.getElementById('adminPasswordToggle')?.addEventListener('click', () => {
                    this.toggleAdminPassword();
                });

                // Logout button
                document.getElementById('adminLogoutBtn')?.addEventListener('click', () => {
                    this.handleAdminLogout();
                });

                // Calendar navigation
                document.getElementById('adminPrevMonth')?.addEventListener('click', () => {
                    this.navigateAdminMonth(-1);
                });

                document.getElementById('adminNextMonth')?.addEventListener('click', () => {
                    this.navigateAdminMonth(1);
                });

                console.log(' Admin event listeners setup complete');
            }

            setupScrollEffects() {
                let ticking = false;
                
                const handleScroll = () => {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            this.updateScrollEffects();
                            ticking = false;
                        });
                        ticking = true;
                    }
                };
                
                window.addEventListener('scroll', handleScroll, { passive: true });
            }

            updateScrollEffects() {
                const scrollY = window.scrollY;
                const navbar = document.getElementById('mainNav');
                
                if (navbar) {
                    if (scrollY > 50) {
                        navbar.classList.add('scrolled');
                    } else {
                        navbar.classList.remove('scrolled');
                    }
                }
            }

            async handleAdminLogin() {
                const email = document.getElementById('adminEmail').value.trim();
                const password = document.getElementById('adminPassword').value;
                const loginBtn = document.getElementById('adminLoginBtn');
                const errorDiv = document.getElementById('adminLoginError');

                if (!email || !password) {
                    this.showError(errorDiv, 'Please enter both email and password');
                    return;
                }

                this.showLoadingState(loginBtn, 'Authenticating...');
                errorDiv.classList.add('hidden');

                try {
                    console.log(' Admin login attempt:', { email, password });
                    
                    // Force admin portal detection and use mock mode
                    const response = await this.portalSystem.apiCall('adminLogin', 'POST', {
                        email,
                        password
                    }, { portal: 'admin', mockMode: true });

                    console.log(' Admin login response:', response);

                    if (response && response.success) {
                        this.portalSystem.setAuthToken('admin', response.token);
                        this.currentAdmin = response.admin;
                        
                        await this.playSuccessAnimation(loginBtn);
                        await this.loadAdminData();
                        
                        setTimeout(() => {
                            this.showAdminPortal();
                            this.portalSystem.showNotification('Welcome back! Admin access granted.', 'success', {
                                title: 'Admin Login Successful',
                                duration: 4000
                            });
                        }, 1000);
                    } else {
                        throw new Error(response.error || 'Admin login failed');
                    }

                } catch (error) {
                    console.error('Admin login error:', error);
                    await this.playErrorAnimation(loginBtn);
                    this.showError(errorDiv, error.message || 'Admin login failed. Please check your credentials.');
                } finally {
                    this.hideLoadingState(loginBtn, 'Admin Sign In');
                }
            }

            async validateAdminToken(token) {
                try {
                    const response = await this.portalSystem.apiCall('adminLogin', 'GET', null, { portal: 'admin' });
                    
                    if (response && response.success) {
                        this.currentAdmin = response.admin;
                        await this.loadAdminData();
                        this.showAdminPortal();
                    } else {
                        this.portalSystem.clearAuthToken('admin');
                        this.showLogin();
                    }
                } catch (error) {
                    console.error('Admin token validation error:', error);
                    this.portalSystem.clearAuthToken('admin');
                    this.showLogin();
                }
            }

            async loadAdminData() {
                try {
                    console.log(' Loading admin data...');
                    
                    // Load admin-specific data
                    const dataPromises = [
                        this.loadCustomers(),
                        this.loadAllBookings(),
                        this.loadStaff(),
                        this.loadAnalytics()
                    ];
                    
                    await Promise.allSettled(dataPromises);
                    
                    this.updateAdminUserInfo();
                    this.updateAdminStats();
                    this.generateAdminCalendar();
                    
                    console.log(' Admin data loaded successfully');
                } catch (error) {
                    console.error('Error loading admin data:', error);
                    this.portalSystem.showNotification('Some admin data could not be loaded.', 'error');
                }
            }

            async loadCustomers() {
                try {
                    const response = await this.portalSystem.apiCall('adminCustomers', 'GET');
                    if (response && response.success) {
                        this.customers = response.customers || [];
                    } else {
                        // Generate sample customers for demo
                        this.customers = this.generateSampleCustomers();
                    }
                } catch (error) {
                    console.error('Error loading customers:', error);
                    // Generate sample customers for demo
                    this.customers = this.generateSampleCustomers();
                }
            }

            async loadAllBookings() {
                try {
                    const response = await this.portalSystem.apiCall('adminBookings', 'GET');
                    if (response && response.success) {
                        this.bookings = response.bookings || [];
                    } else {
                        // Generate sample bookings for demo
                        this.bookings = this.generateSampleBookings();
                    }
                } catch (error) {
                    console.error('Error loading bookings:', error);
                    // Generate sample bookings for demo
                    this.bookings = this.generateSampleBookings();
                }
            }

            async loadStaff() {
                try {
                    const response = await this.portalSystem.apiCall('/api/admin/staff', 'GET');
                    if (response && response.success) {
                        this.staff = response.staff || [];
                    } else {
                        // Generate sample staff for demo
                        this.staff = this.generateSampleStaff();
                    }
                } catch (error) {
                    console.error('Error loading staff:', error);
                    // Generate sample staff for demo
                    this.staff = this.generateSampleStaff();
                }
            }

            async loadAnalytics() {
                try {
                    const response = await this.portalSystem.apiCall('adminStats', 'GET');
                    if (response && response.success) {
                        this.analytics = response.analytics || {};
                    }
                } catch (error) {
                    console.error('Error loading analytics:', error);
                }
            }

            generateSampleCustomers() {
                const firstNames = ['John', 'Sarah', 'Michael', 'Emily', 'David', 'Jessica', 'Robert', 'Ashley', 'Christopher', 'Amanda', 'Matthew', 'Jennifer'];
                const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez', 'Hernandez', 'Lopez'];
                const plans = ['basic', 'premium', 'deluxe'];
                const statuses = ['active', 'inactive', 'pending'];
                
                const customers = [];
                for (let i = 0; i < 25; i++) {
                    const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                    const plan = plans[Math.floor(Math.random() * plans.length)];
                    const status = i < 20 ? 'active' : statuses[Math.floor(Math.random() * statuses.length)];
                    
                    customers.push({
                        id: `cust_${i + 1}`,
                        name: `${firstName} ${lastName}`,
                        email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}@email.com`,
                        phone: `(805) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`,
                        address: `${Math.floor(Math.random() * 9999) + 1} ${lastName} St, Simi Valley, CA`,
                        plan,
                        status,
                        createdAt: new Date(Date.now() - Math.floor(Math.random() * 365 * 24 * 60 * 60 * 1000)).toISOString(),
                        createdBy: 'System Admin',
                        notes: Math.random() > 0.7 ? 'Special pool cleaning requirements' : ''
                    });
                }
                return customers;
            }

            generateSampleBookings() {
                const services = ['Pool Cleaning', 'Pool Maintenance', 'Emergency Repair', 'Chemical Balancing', 'Equipment Inspection'];
                const statuses = ['confirmed', 'pending', 'completed', 'cancelled'];
                const times = ['8:00 AM', '9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM', '3:00 PM', '4:00 PM'];
                
                const bookings = [];
                for (let i = 0; i < 50; i++) {
                    const service = services[Math.floor(Math.random() * services.length)];
                    const status = statuses[Math.floor(Math.random() * statuses.length)];
                    const time = times[Math.floor(Math.random() * times.length)];
                    
                    // Generate dates within the last 30 days and next 30 days
                    const randomDate = new Date();
                    randomDate.setDate(randomDate.getDate() + Math.floor(Math.random() * 60) - 30);
                    
                    const customerIndex = Math.floor(Math.random() * (this.customers?.length || 25));
                    const customerName = this.customers?.[customerIndex]?.name || `Customer ${customerIndex + 1}`;
                    
                    const baseCost = service === 'Emergency Repair' ? 300 : service === 'Pool Maintenance' ? 200 : 150;
                    const cost = baseCost + Math.floor(Math.random() * 100);
                    
                    bookings.push({
                        id: `booking_${i + 1}`,
                        date: randomDate.toISOString().split('T')[0],
                        time,
                        service,
                        status,
                        customerName,
                        customerId: `cust_${customerIndex + 1}`,
                        cost,
                        createdAt: new Date(Date.now() - Math.floor(Math.random() * 30 * 24 * 60 * 60 * 1000)).toISOString(),
                        notes: Math.random() > 0.8 ? 'Special instructions for this booking' : ''
                    });
                }
                return bookings;
            }

            generateSampleStaff() {
                const staffNames = [
                    { first: 'Alex', last: 'Thompson', role: 'lifeguard' },
                    { first: 'Maria', last: 'Rodriguez', role: 'pool_technician' },
                    { first: 'James', last: 'Wilson', role: 'lifeguard' },
                    { first: 'Lisa', last: 'Chen', role: 'supervisor' },
                    { first: 'Michael', last: 'Davis', role: 'pool_technician' },
                    { first: 'Sandra', last: 'Miller', role: 'lifeguard' },
                    { first: 'Kevin', last: 'Johnson', role: 'manager' },
                    { first: 'Rachel', last: 'Brown', role: 'lifeguard' },
                    { first: 'Tom', last: 'Anderson', role: 'pool_technician' },
                    { first: 'Amy', last: 'Garcia', role: 'supervisor' }
                ];
                
                const certifications = ['CPR Certified', 'Lifeguard Certified', 'First Aid Certified', 'Pool Operator Certified', 'Fully Certified'];
                const statuses = ['active', 'inactive', 'training'];
                
                const staff = [];
                staffNames.forEach((person, i) => {
                    const certification = certifications[Math.floor(Math.random() * certifications.length)];
                    const status = i < 8 ? 'active' : statuses[Math.floor(Math.random() * statuses.length)];
                    const hourlyRate = person.role === 'manager' ? 35 : person.role === 'supervisor' ? 28 : person.role === 'pool_technician' ? 25 : 20;
                    
                    staff.push({
                        id: `staff_${i + 1}`,
                        name: `${person.first} ${person.last}`,
                        email: `${person.first.toLowerCase()}.${person.last.toLowerCase()}@805lifeguard.com`,
                        phone: `(805) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`,
                        role: person.role,
                        status,
                        certification,
                        hourlyRate: hourlyRate + Math.floor(Math.random() * 5),
                        createdAt: new Date(Date.now() - Math.floor(Math.random() * 180 * 24 * 60 * 60 * 1000)).toISOString(),
                        createdBy: 'HR Admin',
                        notes: Math.random() > 0.8 ? 'Excellent performance record' : ''
                    });
                });
                
                return staff;
            }

            updateAdminUserInfo() {
                if (!this.currentAdmin) return;

                const userAvatar = document.getElementById('adminUserAvatar');
                const userName = document.getElementById('adminUserName');

                if (userAvatar) userAvatar.textContent = this.getInitials(this.currentAdmin.name);
                if (userName) userName.textContent = this.currentAdmin.name || 'Admin User';
            }

            updateAdminStats() {
                // Calculate stats from loaded data
                const totalCustomers = this.customers.length;
                const totalBookings = this.bookings.length;
                const activeStaff = this.staff.filter(s => s.status === 'active').length;
                
                // Calculate monthly revenue (mock calculation)
                const thisMonth = new Date();
                const monthlyBookings = this.bookings.filter(booking => {
                    const bookingDate = new Date(booking.date);
                    return bookingDate.getMonth() === thisMonth.getMonth() &&
                           bookingDate.getFullYear() === thisMonth.getFullYear() &&
                           booking.status === 'confirmed';
                });
                
                const monthlyRevenue = monthlyBookings.reduce((total, booking) => {
                    return total + (booking.cost || 0);
                }, 0);

                // Animate stats
                this.animateNumber('totalCustomers', totalCustomers);
                this.animateNumber('totalBookings', totalBookings);
                this.animateNumber('activeStaff', activeStaff);
                this.animateRevenue('monthlyRevenue', monthlyRevenue);
            }

            animateNumber(elementId, targetValue) {
                const element = document.getElementById(elementId);
                if (!element) return;
                
                let currentValue = 0;
                const increment = Math.max(1, Math.ceil(targetValue / 30));
                
                const timer = setInterval(() => {
                    if (currentValue < targetValue) {
                        currentValue = Math.min(currentValue + increment, targetValue);
                        element.textContent = currentValue;
                    } else {
                        clearInterval(timer);
                    }
                }, 50);
            }

            animateRevenue(elementId, targetValue) {
                const element = document.getElementById(elementId);
                if (!element) return;
                
                let currentValue = 0;
                const increment = Math.max(100, Math.ceil(targetValue / 30));
                
                const timer = setInterval(() => {
                    if (currentValue < targetValue) {
                        currentValue = Math.min(currentValue + increment, targetValue);
                        element.textContent = '$' + currentValue.toLocaleString();
                    } else {
                        clearInterval(timer);
                    }
                }, 50);
            }

            showLogin() {
                const loginContainer = document.getElementById('loginContainer');
                const portalContainer = document.getElementById('adminPortalContainer');
                if (loginContainer) loginContainer.style.display = 'flex';
                if (portalContainer) portalContainer.style.display = 'none';
            }

            showAdminPortal() {
                const loginContainer = document.getElementById('loginContainer');
                const portalContainer = document.getElementById('adminPortalContainer');
                if (loginContainer) loginContainer.style.display = 'none';
                if (portalContainer) portalContainer.style.display = 'block';
                
                this.updateAdminUserInfo();
                
                console.log(' Admin portal loaded successfully!');
            }

            handleAdminLogout() {
                if (confirm('Are you sure you want to logout from the admin portal?')) {
                    this.portalSystem.clearAuthToken('admin');
                    this.currentAdmin = null;
                    this.customers = [];
                    this.bookings = [];
                    this.staff = [];
                    this.analytics = {};
                    
                    document.getElementById('adminLoginForm').reset();
                    this.showLogin();
                    
                    this.portalSystem.showNotification('Admin logout successful.', 'info');
                }
            }

            toggleAdminPassword() {
                const passwordInput = document.getElementById('adminPassword');
                const toggleBtn = document.getElementById('adminPasswordToggle');
                const icon = toggleBtn.querySelector('i');

                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            }

            // Enhanced Calendar Management for Admin
            generateAdminCalendar() {
                this.currentDate = this.currentDate || new Date();
                this.selectedDate = null;
                
                const calendarGrid = document.getElementById('adminCalendarGrid');
                const currentMonthDisplay = document.getElementById('adminCurrentMonth');
                
                if (!calendarGrid || !currentMonthDisplay) return;
                
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'];
                currentMonthDisplay.textContent = `${monthNames[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`;

                // Animate month change
                calendarGrid.style.opacity = '0.7';
                calendarGrid.style.transform = 'scale(0.95)';

                setTimeout(() => {
                    calendarGrid.innerHTML = '';
                    this.generateAdminCalendarContent(calendarGrid);
                    
                    calendarGrid.style.transition = 'all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    calendarGrid.style.opacity = '1';
                    calendarGrid.style.transform = 'scale(1)';
                }, 150);

                console.log(' Admin calendar generated successfully');
            }

            generateAdminCalendarContent(calendarGrid) {
                // Day headers
                const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayHeaders.forEach(day => {
                    const header = document.createElement('div');
                    header.className = 'calendar-day-header';
                    header.textContent = day;
                    header.setAttribute('role', 'columnheader');
                    calendarGrid.appendChild(header);
                });

                // Generate calendar days
                const firstDay = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                const today = new Date();
                today.setHours(0, 0, 0, 0);

                for (let i = 0; i < 42; i++) {
                    const currentDay = new Date(startDate);
                    currentDay.setDate(startDate.getDate() + i);
                    
                    const dayElement = this.createAdminCalendarDay(currentDay, today, i);
                    calendarGrid.appendChild(dayElement);
                }
            }

            createAdminCalendarDay(date, today, index) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.setAttribute('role', 'gridcell');
                dayElement.setAttribute('tabindex', '0');
                dayElement.setAttribute('aria-label', date.toLocaleDateString());

                // Enhanced styling classes
                if (date.getMonth() !== this.currentDate.getMonth()) {
                    dayElement.classList.add('other-month');
                }

                if (date.getTime() === today.getTime()) {
                    dayElement.classList.add('today');
                    dayElement.setAttribute('aria-current', 'date');
                }

                if (date < today) {
                    dayElement.classList.add('past-date');
                }

                // Check if this date is selected
                if (this.selectedDate && date.toDateString() === this.selectedDate.toDateString()) {
                    dayElement.classList.add('selected');
                    dayElement.setAttribute('aria-selected', 'true');
                }

                // Add booking status for admin view
                const bookingStatus = this.getAdminDateBookingStatus(date);
                dayElement.classList.add(bookingStatus.status);

                // Enhanced day number
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = date.getDate();
                dayElement.appendChild(dayNumber);

                // Enhanced events container
                const eventsContainer = document.createElement('div');
                eventsContainer.className = 'day-events';
                
                bookingStatus.events.forEach((event, eventIndex) => {
                    const eventDot = document.createElement('div');
                    eventDot.className = `event-dot event-${event.type}`;
                    eventDot.style.animationDelay = `${(index * 50) + (eventIndex * 100)}ms`;
                    eventsContainer.appendChild(eventDot);
                });

                dayElement.appendChild(eventsContainer);

                // Booking count display
                if (bookingStatus.bookingCount > 0) {
                    const countElement = document.createElement('div');
                    countElement.className = 'day-booking-count';
                    countElement.textContent = `${bookingStatus.bookingCount} booking${bookingStatus.bookingCount > 1 ? 's' : ''}`;
                    dayElement.appendChild(countElement);
                }

                // Enhanced event listeners
                if (!dayElement.classList.contains('other-month')) {
                    dayElement.addEventListener('click', () => {
                        this.selectAdminCalendarDate(new Date(date));
                    });
                    
                    dayElement.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.selectAdminCalendarDate(new Date(date));
                        }
                    });

                    // Enhanced hover effects
                    dayElement.addEventListener('mouseenter', () => {
                        if (!dayElement.classList.contains('selected')) {
                            dayElement.style.transform = 'scale(1.05)';
                            dayElement.style.zIndex = '10';
                        }
                    });

                    dayElement.addEventListener('mouseleave', () => {
                        if (!dayElement.classList.contains('selected')) {
                            dayElement.style.transform = '';
                            dayElement.style.zIndex = '';
                        }
                    });
                }

                // Staggered animation
                dayElement.style.opacity = '0';
                dayElement.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    dayElement.style.transition = 'all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    dayElement.style.opacity = '1';
                    dayElement.style.transform = 'translateY(0)';
                }, index * 20);

                return dayElement;
            }

            getAdminDateBookingStatus(date) {
                const dateKey = date.toISOString().split('T')[0];
                
                // Get all bookings for this date
                const dayBookings = this.bookings.filter(booking => 
                    booking.date === dateKey && booking.status !== 'cancelled'
                );
                
                let status = 'available';
                let events = [];
                
                if (dayBookings.length > 0) {
                    const confirmedBookings = dayBookings.filter(b => b.status === 'confirmed');
                    const pendingBookings = dayBookings.filter(b => b.status === 'pending');
                    
                    if (confirmedBookings.length > 5) {
                        status = 'unavailable';
                        events.push({ type: 'booked' });
                    } else if (confirmedBookings.length > 0) {
                        status = 'booked';
                        events.push({ type: 'booked' });
                    }
                    
                    if (pendingBookings.length > 0) {
                        events.push({ type: 'available' });
                    }
                } else {
                    events.push({ type: 'available' });
                }
                
                // Check for staff scheduled
                const staffScheduled = this.staff.some(s => 
                    s.schedule && s.schedule.some(shift => shift.date === dateKey)
                );
                
                if (staffScheduled) {
                    events.push({ type: 'staff' });
                    if (status === 'available') status = 'staff-scheduled';
                }
                
                return {
                    status,
                    events,
                    bookingCount: dayBookings.length
                };
            }

            selectAdminCalendarDate(date) {
                console.log(' Admin calendar date selected:', date.toDateString());
                
                // Remove previous selection
                document.querySelectorAll('#adminCalendarGrid .calendar-day.selected').forEach(day => {
                    day.classList.remove('selected');
                    day.removeAttribute('aria-selected');
                    day.style.transform = '';
                    day.style.zIndex = '';
                });
                
                this.selectedDate = date;
                this.generateAdminCalendar();
                
                // Show day details or trigger action
                this.showDayBookingDetails(date);
            }

            navigateAdminMonth(direction) {
                if (!this.currentDate) this.currentDate = new Date();
                this.currentDate.setMonth(this.currentDate.getMonth() + direction);
                this.generateAdminCalendar();
            }

            showDayBookingDetails(date) {
                const dateKey = date.toISOString().split('T')[0];
                const dayBookings = this.bookings.filter(booking => 
                    booking.date === dateKey && booking.status !== 'cancelled'
                );
                
                const title = `Bookings for ${date.toLocaleDateString()}`;
                const message = dayBookings.length > 0 
                    ? `Found ${dayBookings.length} booking${dayBookings.length > 1 ? 's' : ''} for this date`
                    : 'No bookings scheduled for this date';
                
                this.portalSystem.showNotification(message, 'info', {
                    title,
                    duration: 6000,
                    actions: dayBookings.length > 0 ? [{
                        text: 'View Details',
                        action: () => this.viewDayDetails(date)
                    }] : []
                });
            }

            // Admin Management Functions
            viewDayDetails() {
                if (!this.selectedDate) {
                    this.portalSystem.showNotification('Please select a date first', 'warning');
                    return;
                }
                
                const dateKey = this.selectedDate.toISOString().split('T')[0];
                const dayBookings = this.bookings.filter(booking => 
                    booking.date === dateKey && booking.status !== 'cancelled'
                );
                
                this.showDayDetailsModal(this.selectedDate, dayBookings);
            }

            showDayDetailsModal(date, bookings) {
                const modal = this.createModal('Day Details', `
                    <div class="day-details-content">
                        <h3 style="margin-bottom: var(--space-4); color: var(--primary);">
                            ${date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                        </h3>
                        
                        <div class="stats-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: var(--space-4); margin-bottom: var(--space-6);">
                            <div class="stat-box" style="background: rgba(30, 136, 229, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--primary);">${bookings.length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Total Bookings</div>
                            </div>
                            <div class="stat-box" style="background: rgba(76, 175, 80, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--success);">${bookings.filter(b => b.status === 'confirmed').length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Confirmed</div>
                            </div>
                            <div class="stat-box" style="background: rgba(255, 152, 0, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--warning);">${bookings.filter(b => b.status === 'pending').length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Pending</div>
                            </div>
                        </div>
                        
                        ${bookings.length > 0 ? `
                            <div class="bookings-table">
                                <h4 style="margin-bottom: var(--space-3); color: var(--dark);">Bookings for this day:</h4>
                                <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: var(--light-gray); position: sticky; top: 0;">
                                                <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Time</th>
                                                <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Customer</th>
                                                <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Service</th>
                                                <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Status</th>
                                                <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${bookings.map(booking => `
                                                <tr style="border-bottom: 1px solid #dee2e6;">
                                                    <td style="padding: var(--space-3); font-weight: 600;">${booking.time || '9:00 AM'}</td>
                                                    <td style="padding: var(--space-3);">${booking.customerName || 'Customer Name'}</td>
                                                    <td style="padding: var(--space-3);">${booking.service || 'Pool Cleaning'}</td>
                                                    <td style="padding: var(--space-3);">
                                                        <span class="status-badge status-${booking.status}" style="padding: var(--space-1) var(--space-3); border-radius: var(--radius-full); font-size: var(--font-sm); font-weight: 600;">
                                                            ${booking.status}
                                                        </span>
                                                    </td>
                                                    <td style="padding: var(--space-3);">
                                                        <button onclick="adminPortal.editBooking('${booking.id}')" class="btn-small btn-edit" style="margin-right: var(--space-2);">Edit</button>
                                                        ${booking.status === 'pending' ? 
                                                            `<button onclick="adminPortal.confirmBooking('${booking.id}')" class="btn-small btn-success">Confirm</button>` : 
                                                            `<button onclick="adminPortal.cancelBooking('${booking.id}')" class="btn-small btn-cancel">Cancel</button>`
                                                        }
                                                    </td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        ` : `
                            <div style="text-align: center; padding: var(--space-8); color: var(--gray);">
                                <i class="fas fa-calendar-times" style="font-size: var(--font-4xl); margin-bottom: var(--space-4); opacity: 0.5;"></i>
                                <p>No bookings scheduled for this date</p>
                                <button onclick="adminPortal.addBookingForDate('${date.toISOString()}')" class="btn-primary" style="margin-top: var(--space-4);">
                                    Add Booking
                                </button>
                            </div>
                        `}
                    </div>
                `);
                
                this.showModal(modal);
            }

            addBlockedTime() {
                if (!this.selectedDate) {
                    this.portalSystem.showNotification('Please select a date first', 'warning');
                    return;
                }
                
                this.showBlockTimeModal(this.selectedDate);
            }

            showBlockTimeModal(date) {
                const modal = this.createModal('Block Time Slot', `
                    <form id="blockTimeForm" class="block-time-form">
                        <div style="margin-bottom: var(--space-5);">
                            <label class="form-label">Date</label>
                            <input type="text" class="form-input" value="${date.toLocaleDateString()}" readonly>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="blockStartTime" class="form-label">Start Time</label>
                                <select id="blockStartTime" class="form-input">
                                    <option value="08:00">8:00 AM</option>
                                    <option value="09:00">9:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                    <option value="16:00">4:00 PM</option>
                                    <option value="17:00">5:00 PM</option>
                                </select>
                            </div>
                            <div>
                                <label for="blockEndTime" class="form-label">End Time</label>
                                <select id="blockEndTime" class="form-input">
                                    <option value="09:00">9:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                    <option value="16:00">4:00 PM</option>
                                    <option value="17:00">5:00 PM</option>
                                    <option value="18:00">6:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="blockReason" class="form-label">Reason for Blocking</label>
                            <select id="blockReason" class="form-input">
                                <option value="maintenance">Maintenance</option>
                                <option value="weather">Weather Hold</option>
                                <option value="staff_unavailable">Staff Unavailable</option>
                                <option value="holiday">Holiday</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: var(--space-6);">
                            <label for="blockNotes" class="form-label">Notes (Optional)</label>
                            <textarea id="blockNotes" class="form-input" rows="3" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-3); justify-content: flex-end;">
                            <button type="button" onclick="adminPortal.closeModal()" class="btn-secondary">Cancel</button>
                            <button type="submit" class="btn-primary">Block Time</button>
                        </div>
                    </form>
                `);
                
                modal.querySelector('#blockTimeForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleBlockTime(date);
                });
                
                this.showModal(modal);
            }

            handleBlockTime(date) {
                const startTime = document.getElementById('blockStartTime').value;
                const endTime = document.getElementById('blockEndTime').value;
                const reason = document.getElementById('blockReason').value;
                const notes = document.getElementById('blockNotes').value;
                
                // Add blocked time to system (mock implementation)
                const blockedTime = {
                    id: Date.now().toString(),
                    date: date.toISOString().split('T')[0],
                    startTime,
                    endTime,
                    reason,
                    notes,
                    createdBy: this.currentAdmin.name,
                    createdAt: new Date().toISOString()
                };
                
                this.closeModal();
                this.portalSystem.showNotification(`Time blocked successfully from ${startTime} to ${endTime}`, 'success', {
                    title: 'Time Blocked',
                    duration: 4000
                });
                
                this.generateAdminCalendar(); // Refresh calendar
            }

            scheduleStaff() {
                if (!this.selectedDate) {
                    this.portalSystem.showNotification('Please select a date first', 'warning');
                    return;
                }
                
                this.showStaffSchedulingModal(this.selectedDate);
            }

            showStaffSchedulingModal(date) {
                const modal = this.createModal('Schedule Staff', `
                    <form id="scheduleStaffForm" class="schedule-staff-form">
                        <div style="margin-bottom: var(--space-5);">
                            <label class="form-label">Date</label>
                            <input type="text" class="form-input" value="${date.toLocaleDateString()}" readonly>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="scheduleStaffMember" class="form-label">Staff Member</label>
                            <select id="scheduleStaffMember" class="form-input">
                                ${this.staff.map(member => `
                                    <option value="${member.id}">${member.name} - ${member.role}</option>
                                `).join('')}
                            </select>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="scheduleStartTime" class="form-label">Start Time</label>
                                <select id="scheduleStartTime" class="form-input">
                                    <option value="07:00">7:00 AM</option>
                                    <option value="08:00">8:00 AM</option>
                                    <option value="09:00">9:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                </select>
                            </div>
                            <div>
                                <label for="scheduleEndTime" class="form-label">End Time</label>
                                <select id="scheduleEndTime" class="form-input">
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                    <option value="16:00">4:00 PM</option>
                                    <option value="17:00">5:00 PM</option>
                                    <option value="18:00">6:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="scheduleServiceArea" class="form-label">Service Area</label>
                            <select id="scheduleServiceArea" class="form-input">
                                <option value="simi_valley">Simi Valley</option>
                                <option value="thousand_oaks">Thousand Oaks</option>
                                <option value="moorpark">Moorpark</option>
                                <option value="westlake_village">Westlake Village</option>
                                <option value="camarillo">Camarillo</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: var(--space-6);">
                            <label for="scheduleNotes" class="form-label">Schedule Notes</label>
                            <textarea id="scheduleNotes" class="form-input" rows="3" placeholder="Special instructions or notes..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-3); justify-content: flex-end;">
                            <button type="button" onclick="adminPortal.closeModal()" class="btn-secondary">Cancel</button>
                            <button type="submit" class="btn-primary">Schedule Staff</button>
                        </div>
                    </form>
                `);
                
                modal.querySelector('#scheduleStaffForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleStaffScheduling(date);
                });
                
                this.showModal(modal);
            }

            handleStaffScheduling(date) {
                const staffId = document.getElementById('scheduleStaffMember').value;
                const startTime = document.getElementById('scheduleStartTime').value;
                const endTime = document.getElementById('scheduleEndTime').value;
                const serviceArea = document.getElementById('scheduleServiceArea').value;
                const notes = document.getElementById('scheduleNotes').value;
                
                const staffMember = this.staff.find(s => s.id === staffId);
                
                this.closeModal();
                this.portalSystem.showNotification(`${staffMember.name} scheduled for ${startTime} - ${endTime}`, 'success', {
                    title: 'Staff Scheduled',
                    duration: 4000
                });
                
                this.generateAdminCalendar(); // Refresh calendar
            }

            // Customer Management Functions
            openCustomerManagement() {
                this.showCustomerManagementModal();
            }

            showCustomerManagementModal() {
                const modal = this.createModal('Customer Management', `
                    <div class="customer-management">
                        <div class="management-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-6);">
                            <div class="search-bar" style="flex: 1; margin-right: var(--space-4);">
                                <input type="text" id="customerSearch" class="form-input" placeholder="Search customers by name, email, or phone...">
                            </div>
                            <button onclick="adminPortal.showAddCustomerForm()" class="btn-primary">
                                <i class="fas fa-user-plus"></i> Add Customer
                            </button>
                        </div>
                        
                        <div class="customer-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: var(--space-4); margin-bottom: var(--space-6);">
                            <div class="stat-box" style="background: rgba(30, 136, 229, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--primary);">${this.customers.length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Total Customers</div>
                            </div>
                            <div class="stat-box" style="background: rgba(76, 175, 80, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--success);">${this.customers.filter(c => c.status === 'active').length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Active</div>
                            </div>
                            <div class="stat-box" style="background: rgba(255, 152, 0, 0.1); padding: var(--space-4); border-radius: var(--radius-lg); text-align: center;">
                                <div style="font-size: var(--font-2xl); font-weight: 800; color: var(--warning);">${this.customers.filter(c => c.plan === 'premium').length}</div>
                                <div style="font-size: var(--font-sm); color: var(--gray);">Premium</div>
                            </div>
                        </div>
                        
                        <div class="customers-table-container" style="max-height: 500px; overflow-y: auto;">
                            <table id="customersTable" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: var(--light-gray); position: sticky; top: 0;">
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Name</th>
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Email</th>
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Phone</th>
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Plan</th>
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Status</th>
                                        <th style="padding: var(--space-3); text-align: left; border-bottom: 2px solid #dee2e6;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTableBody">
                                    <!-- Will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div style="margin-top: var(--space-6); display: flex; gap: var(--space-3); justify-content: flex-end;">
                            <button onclick="adminPortal.exportCustomers()" class="btn-secondary">
                                <i class="fas fa-download"></i> Export CSV
                            </button>
                            <button onclick="adminPortal.closeModal()" class="btn-secondary">Close</button>
                        </div>
                    </div>
                `, 'large');
                
                this.populateCustomersTable();
                
                // Add search functionality
                document.getElementById('customerSearch').addEventListener('input', (e) => {
                    this.filterCustomers(e.target.value);
                });
                
                this.showModal(modal);
            }

            populateCustomersTable() {
                const tbody = document.getElementById('customersTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = this.customers.map(customer => `
                    <tr style="border-bottom: 1px solid #dee2e6; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f8f9fa'" onmouseout="this.style.backgroundColor=''">
                        <td style="padding: var(--space-3); font-weight: 600;">${customer.name}</td>
                        <td style="padding: var(--space-3);">${customer.email}</td>
                        <td style="padding: var(--space-3);">${customer.phone}</td>
                        <td style="padding: var(--space-3);">
                            <span class="plan-badge plan-${customer.plan}" style="padding: var(--space-1) var(--space-2); border-radius: var(--radius-sm); font-size: var(--font-xs); font-weight: 600; text-transform: uppercase;">
                                ${customer.plan}
                            </span>
                        </td>
                        <td style="padding: var(--space-3);">
                            <span class="status-badge status-${customer.status}" style="padding: var(--space-1) var(--space-3); border-radius: var(--radius-full); font-size: var(--font-sm); font-weight: 600;">
                                ${customer.status}
                            </span>
                        </td>
                        <td style="padding: var(--space-3);">
                            <button onclick="adminPortal.editCustomer('${customer.id}')" class="btn-small btn-edit" style="margin-right: var(--space-2);">Edit</button>
                            <button onclick="adminPortal.viewCustomerDetails('${customer.id}')" class="btn-small btn-success">View</button>
                        </td>
                    </tr>
                `).join('');
            }

            filterCustomers(searchTerm) {
                const filteredCustomers = this.customers.filter(customer => 
                    customer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    customer.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    customer.phone.includes(searchTerm)
                );
                
                const tbody = document.getElementById('customersTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = filteredCustomers.map(customer => `
                    <tr style="border-bottom: 1px solid #dee2e6; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f8f9fa'" onmouseout="this.style.backgroundColor=''">
                        <td style="padding: var(--space-3); font-weight: 600;">${customer.name}</td>
                        <td style="padding: var(--space-3);">${customer.email}</td>
                        <td style="padding: var(--space-3);">${customer.phone}</td>
                        <td style="padding: var(--space-3);">
                            <span class="plan-badge plan-${customer.plan}" style="padding: var(--space-1) var(--space-2); border-radius: var(--radius-sm); font-size: var(--font-xs); font-weight: 600; text-transform: uppercase;">
                                ${customer.plan}
                            </span>
                        </td>
                        <td style="padding: var(--space-3);">
                            <span class="status-badge status-${customer.status}" style="padding: var(--space-1) var(--space-3); border-radius: var(--radius-full); font-size: var(--font-sm); font-weight: 600;">
                                ${customer.status}
                            </span>
                        </td>
                        <td style="padding: var(--space-3);">
                            <button onclick="adminPortal.editCustomer('${customer.id}')" class="btn-small btn-edit" style="margin-right: var(--space-2);">Edit</button>
                            <button onclick="adminPortal.viewCustomerDetails('${customer.id}')" class="btn-small btn-success">View</button>
                        </td>
                    </tr>
                `).join('');
            }

            showAddCustomerForm() {
                const modal = this.createModal('Add New Customer', `
                    <form id="addCustomerForm" class="add-customer-form">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="customerFirstName" class="form-label">First Name</label>
                                <input type="text" id="customerFirstName" class="form-input" required>
                            </div>
                            <div>
                                <label for="customerLastName" class="form-label">Last Name</label>
                                <input type="text" id="customerLastName" class="form-input" required>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="customerEmail" class="form-label">Email Address</label>
                            <input type="email" id="customerEmail" class="form-input" required>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="customerPhone" class="form-label">Phone Number</label>
                            <input type="tel" id="customerPhone" class="form-input" required>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="customerAddress" class="form-label">Address</label>
                            <textarea id="customerAddress" class="form-input" rows="3" placeholder="Street address, city, state, zip code"></textarea>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="customerPlan" class="form-label">Service Plan</label>
                                <select id="customerPlan" class="form-input">
                                    <option value="basic">Basic - Weekly Service</option>
                                    <option value="premium">Premium - Bi-weekly Service</option>
                                    <option value="deluxe">Deluxe - Full Service Package</option>
                                </select>
                            </div>
                            <div>
                                <label for="customerStatus" class="form-label">Status</label>
                                <select id="customerStatus" class="form-input">
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="pending">Pending Setup</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-6);">
                            <label for="customerNotes" class="form-label">Notes</label>
                            <textarea id="customerNotes" class="form-input" rows="3" placeholder="Any special instructions or notes..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-3); justify-content: flex-end;">
                            <button type="button" onclick="adminPortal.closeModal()" class="btn-secondary">Cancel</button>
                            <button type="submit" class="btn-primary">Add Customer</button>
                        </div>
                    </form>
                `);
                
                modal.querySelector('#addCustomerForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleAddCustomer();
                });
                
                this.showModal(modal);
            }

            handleAddCustomer() {
                const firstName = document.getElementById('customerFirstName').value;
                const lastName = document.getElementById('customerLastName').value;
                const email = document.getElementById('customerEmail').value;
                const phone = document.getElementById('customerPhone').value;
                const address = document.getElementById('customerAddress').value;
                const plan = document.getElementById('customerPlan').value;
                const status = document.getElementById('customerStatus').value;
                const notes = document.getElementById('customerNotes').value;
                
                const newCustomer = {
                    id: Date.now().toString(),
                    name: `${firstName} ${lastName}`,
                    email,
                    phone,
                    address,
                    plan,
                    status,
                    notes,
                    createdAt: new Date().toISOString(),
                    createdBy: this.currentAdmin.name
                };
                
                this.customers.push(newCustomer);
                this.closeModal();
                
                this.portalSystem.showNotification(`Customer ${newCustomer.name} added successfully!`, 'success', {
                    title: 'Customer Added',
                    duration: 4000
                });
                
                this.updateAdminStats();
            }

            viewCustomers() {
                this.openCustomerManagement();
            }

            addCustomer() {
                this.showAddCustomerForm();
            }

            editCustomer(customerId) {
                const customer = this.customers.find(c => c.id === customerId);
                if (!customer) return;
                
                // Implementation for edit customer form would go here
                this.portalSystem.showNotification(`Edit functionality for ${customer.name} coming soon!`, 'info');
            }

            viewCustomerDetails(customerId) {
                const customer = this.customers.find(c => c.id === customerId);
                if (!customer) return;
                
                // Implementation for customer details view would go here
                this.portalSystem.showNotification(`Viewing details for ${customer.name}`, 'info');
            }

            exportCustomers() {
                // Create CSV content
                const headers = ['Name', 'Email', 'Phone', 'Plan', 'Status', 'Created'];
                const csvContent = [
                    headers.join(','),
                    ...this.customers.map(customer => [
                        customer.name,
                        customer.email,
                        customer.phone,
                        customer.plan,
                        customer.status,
                        new Date(customer.createdAt).toLocaleDateString()
                    ].join(','))
                ].join('\n');
                
                // Create and download file
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `customers-${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                this.portalSystem.showNotification('Customer data exported successfully!', 'success', {
                    title: 'Export Complete',
                    duration: 4000
                });
            }

            // Utility Functions
            getInitials(name) {
                if (!name) return 'AD';
                const names = name.split(' ');
                if (names.length >= 2) {
                    return (names[0][0] + names[1][0]).toUpperCase();
                }
                return name[0].toUpperCase();
            }

            createModal(title, content, size = 'medium') {
                const modal = document.createElement('div');
                modal.className = 'admin-modal-overlay';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: rgba(0, 0, 0, 0.6);
                    backdrop-filter: blur(10px);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: var(--space-4);
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                
                const modalContent = document.createElement('div');
                modalContent.className = `admin-modal-content ${size}`;
                const maxWidth = size === 'large' ? '1200px' : size === 'medium' ? '800px' : '500px';
                modalContent.style.cssText = `
                    background: rgba(255, 255, 255, 0.98);
                    border-radius: var(--radius-2xl);
                    padding: var(--space-8);
                    max-width: ${maxWidth};
                    width: 100%;
                    max-height: 90vh;
                    overflow-y: auto;
                    box-shadow: var(--shadow-float);
                    border: 1px solid rgba(255, 255, 255, 0.4);
                    position: relative;
                    transform: translateY(30px) scale(0.95);
                    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                `;
                
                const modalHeader = document.createElement('div');
                modalHeader.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: var(--space-6);
                    padding-bottom: var(--space-4);
                    border-bottom: 2px solid #e9ecef;
                `;
                
                const modalTitle = document.createElement('h2');
                modalTitle.textContent = title;
                modalTitle.style.cssText = `
                    font-size: var(--font-2xl);
                    font-weight: 800;
                    color: var(--dark);
                    margin: 0;
                `;
                
                const closeButton = document.createElement('button');
                closeButton.innerHTML = '<i class="fas fa-times"></i>';
                closeButton.style.cssText = `
                    background: none;
                    border: none;
                    font-size: var(--font-xl);
                    color: var(--gray);
                    cursor: pointer;
                    padding: var(--space-2);
                    border-radius: 50%;
                    transition: var(--transition-smooth);
                    width: 40px;
                    height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                `;
                closeButton.addEventListener('click', () => this.closeModal());
                closeButton.addEventListener('mouseenter', () => {
                    closeButton.style.background = 'rgba(244, 67, 54, 0.1)';
                    closeButton.style.color = 'var(--error)';
                });
                closeButton.addEventListener('mouseleave', () => {
                    closeButton.style.background = 'none';
                    closeButton.style.color = 'var(--gray)';
                });
                
                const modalBody = document.createElement('div');
                modalBody.innerHTML = content;
                
                modalHeader.appendChild(modalTitle);
                modalHeader.appendChild(closeButton);
                modalContent.appendChild(modalHeader);
                modalContent.appendChild(modalBody);
                modal.appendChild(modalContent);
                
                // Close on overlay click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.closeModal();
                    }
                });
                
                // Close on escape key
                const handleEscape = (e) => {
                    if (e.key === 'Escape') {
                        this.closeModal();
                        document.removeEventListener('keydown', handleEscape);
                    }
                };
                document.addEventListener('keydown', handleEscape);
                
                return modal;
            }

            showModal(modal) {
                document.body.appendChild(modal);
                document.body.style.overflow = 'hidden';
                
                // Animate in
                requestAnimationFrame(() => {
                    modal.style.opacity = '1';
                    const content = modal.querySelector('.admin-modal-content');
                    content.style.transform = 'translateY(0) scale(1)';
                });
                
                this.currentModal = modal;
            }

            closeModal() {
                if (this.currentModal) {
                    const modal = this.currentModal;
                    const content = modal.querySelector('.admin-modal-content');
                    
                    // Animate out
                    modal.style.opacity = '0';
                    content.style.transform = 'translateY(30px) scale(0.95)';
                    
                    setTimeout(() => {
                        if (modal.parentNode) {
                            modal.parentNode.removeChild(modal);
                        }
                        document.body.style.overflow = '';
                        this.currentModal = null;
                    }, 300);
                }
            }

            showLoadingState(button, text) {
                if (!button) return;
                button.disabled = true;
                button.innerHTML = `<span class="loading"><span class="spinner"></span>${text}</span>`;
            }

            hideLoadingState(button, text) {
                if (!button) return;
                button.disabled = false;
                button.innerHTML = text;
            }

            async playSuccessAnimation(element) {
                return new Promise(resolve => {
                    element.style.background = 'var(--success)';
                    element.style.transform = 'scale(1.05)';
                    
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                        resolve();
                    }, 300);
                });
            }

            async playErrorAnimation(element) {
                return new Promise(resolve => {
                    this.shakeElement(element);
                    setTimeout(resolve, 600);
                });
            }

            shakeElement(element) {
                element.style.animation = 'shake 0.6s ease-in-out';
                
                setTimeout(() => {
                    element.style.animation = '';
                }, 600);
            }

            showError(errorDiv, message) {
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
                this.shakeElement(errorDiv);
            }

            addBookingForDate(dateString) {
                const date = new Date(dateString);
                this.selectedDate = date;
                this.showAddBookingForm(date);
            }

            showAddBookingForm(selectedDate = null) {
                const dateValue = selectedDate ? selectedDate.toISOString().split('T')[0] : '';
                
                const modal = this.createModal('Add New Booking', `
                    <form id="addBookingForm" class="add-booking-form">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="bookingDate" class="form-label">Service Date</label>
                                <input type="date" id="bookingDate" class="form-input" value="${dateValue}" required>
                            </div>
                            <div>
                                <label for="bookingTime" class="form-label">Service Time</label>
                                <select id="bookingTime" class="form-input" required>
                                    <option value="">Select Time</option>
                                    <option value="8:00 AM">8:00 AM</option>
                                    <option value="9:00 AM">9:00 AM</option>
                                    <option value="10:00 AM">10:00 AM</option>
                                    <option value="11:00 AM">11:00 AM</option>
                                    <option value="12:00 PM">12:00 PM</option>
                                    <option value="1:00 PM">1:00 PM</option>
                                    <option value="2:00 PM">2:00 PM</option>
                                    <option value="3:00 PM">3:00 PM</option>
                                    <option value="4:00 PM">4:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="bookingCustomer" class="form-label">Customer</label>
                            <select id="bookingCustomer" class="form-input" required>
                                <option value="">Select Customer</option>
                                ${this.customers.filter(c => c.status === 'active').map(customer => `
                                    <option value="${customer.id}">${customer.name} - ${customer.email}</option>
                                `).join('')}
                            </select>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="bookingService" class="form-label">Service Type</label>
                            <select id="bookingService" class="form-input" required>
                                <option value="">Select Service</option>
                                <option value="Pool Cleaning">Pool Cleaning - $150</option>
                                <option value="Pool Maintenance">Pool Maintenance - $200</option>
                                <option value="Chemical Balancing">Chemical Balancing - $100</option>
                                <option value="Equipment Inspection">Equipment Inspection - $125</option>
                                <option value="Emergency Repair">Emergency Repair - $300</option>
                            </select>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                            <div>
                                <label for="bookingCost" class="form-label">Service Cost ($)</label>
                                <input type="number" id="bookingCost" class="form-input" min="50" step="25" placeholder="150" required>
                            </div>
                            <div>
                                <label for="bookingStatus" class="form-label">Initial Status</label>
                                <select id="bookingStatus" class="form-input">
                                    <option value="pending">Pending Confirmation</option>
                                    <option value="confirmed">Confirmed</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--space-5);">
                            <label for="bookingStaff" class="form-label">Assign Staff (Optional)</label>
                            <select id="bookingStaff" class="form-input">
                                <option value="">Auto-assign based on availability</option>
                                ${this.staff.filter(s => s.status === 'active').map(member => `
                                    <option value="${member.id}">${member.name} - ${member.role}</option>
                                `).join('')}
                            </select>
                        </div>
                        
                        <div style="margin-bottom: var(--space-6);">
                            <label for="bookingNotes" class="form-label">Special Instructions</label>
                            <textarea id="bookingNotes" class="form-input" rows="3" placeholder="Any special requirements or notes for this booking..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-3); justify-content: flex-end;">
                            <button type="button" onclick="adminPortal.closeModal()" class="btn-secondary">Cancel</button>
                            <button type="submit" class="btn-primary">Create Booking</button>
                        </div>
                    </form>
                `);
                
                // Auto-populate cost based on service selection
                modal.querySelector('#bookingService').addEventListener('change', (e) => {
                    const service = e.target.value;
                    const costInput = modal.querySelector('#bookingCost');
                    if (service.includes('Pool Cleaning')) costInput.value = 150;
                    else if (service.includes('Pool Maintenance')) costInput.value = 200;
                    else if (service.includes('Chemical Balancing')) costInput.value = 100;
                    else if (service.includes('Equipment Inspection')) costInput.value = 125;
                    else if (service.includes('Emergency Repair')) costInput.value = 300;
                });
                
                modal.querySelector('#addBookingForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleAddBooking();
                });
                
                this.showModal(modal);
            }

            handleAddBooking() {
                const date = document.getElementById('bookingDate').value;
                const time = document.getElementById('bookingTime').value;
                const customerId = document.getElementById('bookingCustomer').value;
                const service = document.getElementById('bookingService').value.split(' - ')[0]; // Remove price part
                const cost = parseFloat(document.getElementById('bookingCost').value);
                const status = document.getElementById('bookingStatus').value;
                const staffId = document.getElementById('bookingStaff').value;
                const notes = document.getElementById('bookingNotes').value;
                
                const customer = this.customers.find(c => c.id === customerId);
                const staff = staffId ? this.staff.find(s => s.id === staffId) : null;
                
                const newBooking = {
                    id: `booking_${Date.now()}`,
                    date,
                    time,
                    service,
                    status,
                    customerName: customer.name,
                    customerId,
                    cost,
                    assignedStaff: staff ? staff.name : null,
                    assignedStaffId: staffId || null,
                    notes,
                    createdAt: new Date().toISOString(),
                    createdBy: this.currentAdmin.name
                };
                
                this.bookings.push(newBooking);
                this.closeModal();
                
                this.portalSystem.showNotification(`Booking created for ${customer.name} on ${new Date(date).toLocaleDateString()}`, 'success', {
                    title: 'Booking Created',
                    subtitle: `${service} at ${time}`,
                    duration: 5000
                });
                
                this.updateAdminStats();
                this.generateAdminCalendar(); // Refresh calendar to show new booking
            }

            // Additional placeholder functions for demonstration
            openBookingManagement() {
                this.portalSystem.showNotification('Booking Management interface coming soon!', 'info', {
                    title: 'Feature In Development',
                    duration: 4000
                });
            }

            openStaffManagement() {
                this.portalSystem.showNotification('Staff Management interface coming soon!', 'info', {
                    title: 'Feature In Development',
                    duration: 4000
                });
            }

            openAnalytics() {
                this.portalSystem.showNotification('Analytics Dashboard coming soon!', 'info', {
                    title: 'Feature In Development',
                    duration: 4000
                });
            }

            viewBookings() {
                this.openBookingManagement();
            }

            confirmBookings() {
                this.portalSystem.showNotification('Booking confirmation interface coming soon!', 'info');
            }

            cancelBookings() {
                this.portalSystem.showNotification('Booking cancellation interface coming soon!', 'info');
            }

            viewStaff() {
                this.openStaffManagement();
            }

            addStaff() {
                this.portalSystem.showNotification('Add Staff interface coming soon!', 'info');
            }

            manageSchedules() {
                this.portalSystem.showNotification('Schedule management coming soon!', 'info');
            }

            viewReports() {
                this.openAnalytics();
            }

            financialAnalytics() {
                this.openAnalytics();
            }

            exportReports() {
                this.portalSystem.showNotification('Report export coming soon!', 'info');
            }
        }

        // Enhanced Global Functions for Admin Portal
        function openCustomerManagement() {
            if (window.adminPortal) {
                window.adminPortal.openCustomerManagement();
            }
        }

        function openBookingManagement() {
            if (window.adminPortal) {
                window.adminPortal.openBookingManagement();
            }
        }

        function openStaffManagement() {
            if (window.adminPortal) {
                window.adminPortal.openStaffManagement();
            }
        }

        function openAnalytics() {
            if (window.adminPortal) {
                window.adminPortal.openAnalytics();
            }
        }

        // Additional global helper functions
        function viewDayDetails() {
            if (window.adminPortal) {
                window.adminPortal.viewDayDetails();
            }
        }

        function addBlockedTime() {
            if (window.adminPortal) {
                window.adminPortal.addBlockedTime();
            }
        }

        function scheduleStaff() {
            if (window.adminPortal) {
                window.adminPortal.scheduleStaff();
            }
        }

        // Enhanced Admin Portal Initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize enhanced admin portal
            window.adminPortal = new EnhancedAdminPortal();
            
            // Add dynamic CSS animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
                
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
                
                @keyframes fadeInUp {
                    from { 
                        opacity: 0; 
                        transform: translateY(30px); 
                    }
                    to { 
                        opacity: 1; 
                        transform: translateY(0); 
                    }
                }
                
                @keyframes slideInRight {
                    from { 
                        opacity: 0; 
                        transform: translateX(30px); 
                    }
                    to { 
                        opacity: 1; 
                        transform: translateX(0); 
                    }
                }
                
                @keyframes bounceIn {
                    0% {
                        opacity: 0;
                        transform: scale(0.3);
                    }
                    50% {
                        opacity: 1;
                        transform: scale(1.05);
                    }
                    70% {
                        transform: scale(0.9);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1);
                    }
                }
                
                /* Enhanced hover effects for buttons */
                .btn-small:hover {
                    animation: pulse 0.3s ease-in-out;
                }
                
                .dashboard-card:hover .card-icon {
                    animation: bounceIn 0.6s ease-in-out;
                }
                
                /* Notification slide-in animation */
                .notification.show {
                    animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                }
                
                /* Success state animations */
                .status-confirmed, .status-completed {
                    animation: fadeInUp 0.3s ease-out;
                }
                
                /* Loading state improvements */
                .loading {
                    animation: pulse 1.5s ease-in-out infinite;
                }
            `;
            document.head.appendChild(style);
            
            // Add keyboard shortcuts for admin functions
            document.addEventListener('keydown', function(e) {
                // Only activate shortcuts when no input is focused
                if (document.activeElement.tagName === 'INPUT' || 
                    document.activeElement.tagName === 'TEXTAREA' || 
                    document.activeElement.tagName === 'SELECT') {
                    return;
                }
                
                // Ctrl/Cmd + shortcuts for admin functions
                if ((e.ctrlKey || e.metaKey) && window.adminPortal && window.adminPortal.currentAdmin) {
                    switch(e.key.toLowerCase()) {
                        case 'k': // Ctrl+K for customer management
                            e.preventDefault();
                            window.adminPortal.openCustomerManagement();
                            break;
                        case 'b': // Ctrl+B for booking management
                            e.preventDefault();
                            window.adminPortal.openBookingManagement();
                            break;
                        case 's': // Ctrl+S for staff management
                            e.preventDefault();
                            window.adminPortal.openStaffManagement();
                            break;
                        case 'a': // Ctrl+A for analytics
                            e.preventDefault();
                            window.adminPortal.openAnalytics();
                            break;
                        case 'n': // Ctrl+N for new booking
                            e.preventDefault();
                            window.adminPortal.showAddBookingForm();
                            break;
                    }
                }
                
                // Escape key to close modals
                if (e.key === 'Escape' && window.adminPortal && window.adminPortal.currentModal) {
                    window.adminPortal.closeModal();
                }
            });
            
            // Add helpful tooltips
            const addTooltip = (element, text) => {
                if (!element) return;
                element.setAttribute('title', text);
                element.style.cursor = 'help';
            };
            
            // Add tooltips to navigation links
            setTimeout(() => {
                addTooltip(document.querySelector('a[href="/admin"]'), 'Admin Portal - Manage all business operations');
                addTooltip(document.querySelector('a[href="/client-login"]'), 'Client Portal - Customer access');
                addTooltip(document.querySelector('a[href="/employee-login"]'), 'Staff Portal - Employee access');
            }, 1000);
            
            console.log(' Enhanced 805 LifeGuard Admin Portal - Ready');
            console.log(' All enhanced admin systems initialized');
            console.log(' Keyboard shortcuts enabled:');
            console.log('    Ctrl+K: Customer Management');
            console.log('    Ctrl+B: Booking Management');
            console.log('    Ctrl+S: Staff Management');
            console.log('    Ctrl+A: Analytics Dashboard');
            console.log('    Ctrl+N: New Booking');
            console.log('    Escape: Close Modal');
        });

        // Enhanced Error Handling for Admin Portal
        window.addEventListener('error', (event) => {
            console.error(' Admin Portal Error:', event.error);
            
            if (window.adminPortal && window.adminPortal.portalSystem && window.adminPortal.portalSystem.showNotification) {
                window.adminPortal.portalSystem.showNotification(
                    'An error occurred in the admin portal.',
                    'error',
                    {
                        title: 'Admin System Error',
                        subtitle: 'Please refresh or contact IT support',
                        duration: 8000
                    }
                );
            }
        });

        // Performance monitoring
        window.addEventListener('load', () => {
            const loadTime = performance.now();
            console.log(` Admin Portal loaded in ${Math.round(loadTime)}ms`);
            
            if (window.adminPortal && window.adminPortal.portalSystem) {
                setTimeout(() => {
                    window.adminPortal.portalSystem.showNotification(
                        'Admin portal loaded successfully!',
                        'success',
                        {
                            title: 'System Ready',
                            subtitle: 'All management tools are active',
                            duration: 3000
                        }
                    );
                }, 2000);
            }
        });
    </script>
</body>
</html>