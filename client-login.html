```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>805 LifeGuard</title>
    <!-- Link your original CSS file here to maintain identical styling -->
    <!-- Example: <link rel="stylesheet" href="/styles.css"> -->
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="logo">
            805 LifeGuard
        </div>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#portal">Portal</a></li>
        </ul>
    </nav>

    <!-- Login Section -->
    <section class="login">
        <div class="login-container">
            <h1>805 LifeGuard</h1>
            <h2>Client Portal</h2>
            <h3>Welcome Back</h3>
            <p>Sign in to access your account and manage your bookings</p>
            <form id="loginForm">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                <div class="form-options">
                    <label><input type="checkbox" id="remember"> Remember me</label>
                    <a href="#">Forgot password?</a>
                </div>
                <button type="submit" id="signInButton">Sign In <span style="display:none;">Signing In...</span></button>
            </form>
            <p>Don't have an account?</p>
            <button class="create-account-btn">Create Account</button>
            <p>Need help? Contact us at (805) 367-6432</p>
        </div>
    </section>

    <!-- Create Account Modal/Section -->
    <section class="create-account" style="display: none;">
        <div class="modal">
            <h1>Create Your Account</h1>
            <h2>Join 805 LifeGuard today!</h2>
            <button class="close-modal">√ó</button>
            <form id="createAccountForm">
                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="fullName" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label>Email Address *</label>
                    <input type="email" id="createEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label>Password *</label>
                    <input type="password" id="createPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label>Confirm Password *</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm password" required>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="phoneNumber" placeholder="Enter phone number">
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <input type="text" id="address" placeholder="Enter address">
                </div>
                <button type="button" class="cancel-btn">Cancel</button>
                <button type="submit" class="create-account-submit">Create Account <span style="display:none;">Creating...</span></button>
            </form>
        </div>
    </section>

    <!-- Client Portal Dashboard -->
    <section class="client-portal" style="display: none;">
        <header>
            <h1>Client Portal</h1>
            <div class="user-info">
                <span>JD</span>
                <span>John Doe</span>
                <a href="#" class="logout">Logout</a>
            </div>
        </header>

        <main>
            <h2>Welcome back, John!</h2>
            <p>Manage your pool services, schedule new appointments, and track your bookings.</p>

            <div class="stats">
                <div>Total Bookings: 0</div>
                <div>Upcoming: 0</div>
                <div>This Month: 0</div>
                <div>Member Since: 2025</div>
            </div>

            <div class="actions">
                <h3>Quick Book</h3>
                <button id="newBookingBtn">New Booking</button>
                <p>Book swim lessons, lifeguard services, or special events with our streamlined booking system.</p>
                <div class="service-options">
                    <button data-service="swim">Swim Lesson</button>
                    <button data-service="lifeguard">Lifeguard</button>
                    <button data-service="event">Event</button>
                </div>
            </div>

            <div class="bookings">
                <h3>Upcoming Bookings</h3>
                <a href="#">View All</a>
                <p class="bookings-list">Loading your bookings...</p>
            </div>

            <div class="settings">
                <h3>Account Settings</h3>
                <button>Manage</button>
                <p>Update your personal information, preferences, and security settings.</p>
                <div class="setting-options">
                    <button>Profile</button>
                    <button class="logout">Logout</button>
                </div>
            </div>

            <div class="calendar">
                <h3>Available Dates & Times</h3>
                <p class="calendar-header">Loading...</p>
                <div class="calendar-body"></div>
                <div class="legend">
                    <span class="available">Available</span>
                    <span class="partially-booked">Partially Booked</span>
                    <span class="unavailable">Unavailable</span>
                    <span class="booked">Your Bookings</span>
                </div>
            </div>
        </main>
    </section>

    <!-- Book a Service Modal -->
    <section class="book-service" style="display: none;">
        <div class="modal">
            <h1>Book a Service</h1>
            <h2>Select your preferred service and time</h2>
            <button class="close-modal">√ó</button>
            <form id="bookingForm">
                <input type="hidden" id="userId" name="user_id">
                <div class="form-group">
                    <label for="serviceSelect">Select Service</label>
                    <select id="serviceSelect" required>
                        <option value="">Select a service</option>
                        <option value="swim">Swim Lesson</option>
                        <option value="lifeguard" selected>Lifeguard Service</option>
                        <option value="event">Special Event</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dateInput">Selected Date</label>
                    <div class="selected-date">Select a date</div>
                </div>
                <div class="form-group">
                    <label for="timeSelect">Available Time Slots</label>
                    <div class="time-slots">Select a service and date to see available times</div>
                </div>
                <div class="form-group">
                    <label for="durationSelect">Duration</label>
                    <select id="durationSelect" required>
                        <option value="1" selected>1 Hour</option>
                        <option value="1.5">1.5 Hours</option>
                        <option value="2">2 Hours</option>
                        <option value="3">3 Hours</option>
                        <option value="4">4 Hours</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="participantsSelect">Participants</label>
                    <select id="participantsSelect" required>
                        <option value="1" selected>1 Person</option>
                        <option value="2">2 People</option>
                        <option value="3">3 People</option>
                        <option value="4">4 People</option>
                        <option value="5+">5+ People</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="specialRequests">Special Requests (Optional)</label>
                    <textarea id="specialRequests" placeholder="Enter special requests"></textarea>
                </div>
                <button type="button" class="cancel-btn">Cancel</button>
                <button type="submit" class="request-booking">Request Booking</button>
            </form>
        </div>
    </section>

    <script>
        class ClientPortal {
            constructor() {
                this.user = null;
                this.initEventListeners();
                console.log('üèä‚Äç‚ôÇÔ∏è Initializing 805 LifeGuard Client Portal...');
            }

            initEventListeners() {
                console.log('‚úÖ Event listeners setup complete');

                // Login form
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        const email = document.getElementById('email').value;
                        const password = document.getElementById('password').value;
                        try {
                            console.log('üåê API POST /api/auth/login');
                            const response = await this.apiCall('POST', '/api/auth/login', { email, password });
                            console.log('‚úÖ API POST /api/auth/login - Success');
                            this.user = response;
                            localStorage.setItem('user_id', response.user_id || response.id || '123');
                            document.querySelector('.login').style.display = 'none';
                            document.querySelector('.client-portal').style.display = 'block';
                            await Promise.all([this.loadUserData(), this.loadBookings(), this.loadAvailability()]);
                        } catch (error) {
                            console.error('‚ùå Login error:', error);
                            alert('Login failed');
                        }
                    });
                }

                // Create account form
                const createAccountForm = document.getElementById('createAccountForm');
                if (createAccountForm) {
                    createAccountForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        const data = {
                            full_name: document.getElementById('fullName').value,
                            email: document.getElementById('createEmail').value,
                            password: document.getElementById('createPassword').value,
                            phone_number: document.getElementById('phoneNumber').value,
                            address: document.getElementById('address').value
                        };
                        try {
                            await this.apiCall('POST', '/api/users', data);
                            alert('Account created');
                            document.querySelector('.create-account').style.display = 'none';
                        } catch (error) {
                            console.error('‚ùå Create account error:', error);
                            alert('Account creation failed');
                        }
                    });
                }

                // Booking form
                const bookingForm = document.getElementById('bookingForm');
                if (bookingForm) {
                    bookingForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        console.log('üìù Submitting booking...');
                        await this.handleBookingSubmission();
                    });
                }

                // Time slot selection
                const timeSlots = document.querySelector('.time-slots');
                if (timeSlots) {
                    timeSlots.addEventListener('click', (e) => {
                        if (e.target.tagName === 'SPAN') {
                            timeSlots.querySelectorAll('span').forEach(span => span.classList.remove('selected'));
                            e.target.classList.add('selected');
                            console.log('‚è∞ Time slot selected:', e.target.textContent);
                        }
                    });
                }

                // Calendar date selection
                const calendarBody = document.querySelector('.calendar-body');
                if (calendarBody) {
                    calendarBody.addEventListener('click', (e) => {
                        if (e.target.classList.contains('calendar-day')) {
                            const date = e.target.dataset.date;
                            document.querySelector('.selected-date').textContent = date;
                            console.log('üìÖ Calendar date selected:', date);
                            this.loadTimeSlots();
                        }
                    });
                }

                // New booking button
                const newBookingBtn = document.getElementById('newBookingBtn');
                if (newBookingBtn) {
                    newBookingBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelector('.book-service').style.display = 'block';
                        console.log('üîÑ Opening booking modal');
                    });
                }

                // Service options
                document.querySelectorAll('.service-options button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const service = e.target.dataset.service;
                        document.getElementById('serviceSelect').value = service;
                        document.querySelector('.book-service').style.display = 'block';
                        console.log('üéØ Service selected:', service);
                    });
                });

                // Logout
                document.querySelectorAll('.logout').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        localStorage.removeItem('user_id');
                        document.querySelector('.client-portal').style.display = 'none';
                        document.querySelector('.login').style.display = 'block';
                    });
                });

                // Show create account modal
                document.querySelector('.create-account-btn').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelector('.create-account').style.display = 'block';
                });

                // Cancel create account
                document.querySelector('.create-account .cancel-btn').addEventListener('click', () => {
                    document.querySelector('.create-account').style.display = 'none';
                });

                // Cancel booking
                document.querySelector('.book-service .cancel-btn').addEventListener('click', () => {
                    document.querySelector('.book-service').style.display = 'none';
                });
            }

            async handleBookingSubmission() {
                try {
                    const service = document.getElementById('serviceSelect').value;
                    const dateElement = document.querySelector('.selected-date');
                    let date = dateElement ? dateElement.textContent.trim() : null;
                    const timeElement = document.querySelector('.time-slots .selected');
                    const time = timeElement ? timeElement.textContent.trim() : null;
                    const duration = document.getElementById('durationSelect').value;
                    const participants = document.getElementById('participantsSelect').value;
                    const special_requests = document.getElementById('specialRequests').value || '';
                    const user_id = localStorage.getItem('user_id') || null;

                    let formattedDate = date;
                    if (date && date.match(/^[A-Za-z]{3} [A-Za-z]{3} \d{2} \d{4}$/)) {
                        const dateObj = new Date(date);
                        if (isNaN(dateObj)) throw new Error('Invalid date format');
                        formattedDate = dateObj.toISOString().split('T')[0];
                    }

                    let formattedTime = time;
                    if (time && time.match(/^\d{1,2}:\d{2}\s*(AM|PM)$/i)) {
                        const [timePart, period] = time.split(/\s*(AM|PM)/i);
                        let [hours, minutes] = timePart.split(':').map(Number);
                        if (period.toUpperCase() === 'PM' && hours !== 12) hours += 12;
                        if (period.toUpperCase() === 'AM' && hours === 12) hours = 0;
                        formattedTime = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                    }

                    const bookingData = {
                        date: formattedDate,
                        time: formattedTime,
                        service,
                        duration,
                        participants,
                        special_requests,
                        user_id: user_id ? Number(user_id) : null
                    };

                    console.log('Sending booking payload:', bookingData);

                    const requiredFields = { date: formattedDate, time: formattedTime, service, user_id };
                    const missingFields = Object.entries(requiredFields)
                        .filter(([key, value]) => value === null || value === undefined)
                        .map(([key]) => key);
                    
                    if (missingFields.length > 0) {
                        console.error('Missing required fields:', missingFields);
                        alert(`Please fill in all required fields: ${missingFields.join(', ')}`);
                        return;
                    }

                    console.log('üåê API POST /api/bookings');
                    const response = await this.apiCall('POST', '/api/bookings', bookingData);
                    console.log('‚úÖ API POST /api/bookings - Success');
                    
                    document.querySelector('.book-service').style.display = 'none';
                    alert('Booking submitted successfully!');
                    await this.loadBookings();
                } catch (error) {
                    console.error('‚ùå Booking submission error:', error.message);
                    alert('Failed to submit booking. Please try again.');
                }
            }

            async loadUserData() {
                try {
                    console.log('üìä Loading user data...');
                    const profile = await this.apiCall('GET', '/api/user/profile');
                    console.log('‚úÖ API GET /api/user/profile - Success');
                    document.querySelector('.user-info span:nth-child(2)').textContent = profile.name || 'John Doe';
                    document.querySelector('.user-info span:first-child').textContent = profile.name ? profile.name.charAt(0) : 'J';
                    console.log('‚úÖ User data loaded successfully');
                } catch (error) {
                    console.error('‚ùå Load user data error:', error);
                }
            }

            async loadBookings() {
                try {
                    console.log('üåê API GET /api/bookings');
                    const bookings = await this.apiCall('GET', '/api/bookings');
                    console.log('‚úÖ API GET /api/bookings - Success');
                    const bookingsList = document.querySelector('.bookings-list');
                    bookingsList.textContent = bookings.length ? bookings.map(b => `${b.date} ${b.time} (${b.service})`).join(', ') : 'No bookings';
                    console.log(`üìÖ Loaded ${bookings.length} bookings`);
                } catch (error) {
                    console.error('‚ùå Load bookings error:', error);
                }
            }

            async loadAvailability() {
                try {
                    console.log('üåê API GET /api/availability');
                    const availability = await this.apiCall('GET', '/api/availability');
                    console.log('‚úÖ API GET /api/availability - Success');
                    this.renderCalendar(availability);
                    console.log('üìä Availability data loaded');
                } catch (error) {
                    console.error('‚ùå Load availability error:', error);
                }
            }

            renderCalendar(availability) {
                console.log('‚úÖ Calendar generated successfully');
                const calendarBody = document.querySelector('.calendar-body');
                calendarBody.innerHTML = '';
                const dates = Array.from({length: 31}, (_, i) => {
                    const day = i + 1;
                    return {
                        date: `May ${day} 2025`,
                        status: availability?.[day] || 'available'
                    };
                });
                dates.forEach(({date, status}) => {
                    const day = document.createElement('div');
                    day.className = `calendar-day ${status}`;
                    day.dataset.date = date;
                    day.textContent = date.split(' ')[1];
                    calendarBody.appendChild(day);
                });
            }

            loadTimeSlots() {
                console.log('‚è∞ Generating time slots');
                const timeSlots = document.querySelector('.time-slots');
                timeSlots.innerHTML = '';
                ['10:00 AM', '12:00 PM', '2:00 PM', '4:00 PM'].forEach(time => {
                    const span = document.createElement('span');
                    span.textContent = time;
                    timeSlots.appendChild(span);
                });
            }

            async apiCall(method, endpoint, data) {
                const baseUrl = '[invalid url, do not cite]
                try {
                    const response = await fetch(`${baseUrl}${endpoint}`, {
                        method,
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: data ? JSON.stringify(data) : undefined
                    });
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error('‚ùå API call error:', error);
                    throw error;
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new ClientPortal();
            console.log('üèä‚Äç‚ôÇÔ∏è 805 LifeGuard Client Portal - Ready');
            console.log('üîó API Base URL: [invalid url, do not cite]);
            console.log('‚úÖ All systems initialized');
        });
    </script>
</body>
</html>
```
